(function(){"use strict";var e={4283:function(e,t,s){var a=s(9242),i=s(9704),n=(s(2467),s(2483)),o=s(3396);function r(e,t,s,a,i,n){const r=(0,o.up)("a-button"),l=(0,o.up)("a-result");return(0,o.wg)(),(0,o.j4)(l,{status:"404",title:"404","sub-title":"Sorry, the page you visited does not exist."},{extra:(0,o.w5)((()=>[(0,o.Wm)(r,{type:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("Back Home")])),_:1})])),_:1})}var l={},d=s(89);const u=(0,d.Z)(l,[["render",r],["__scopeId","data-v-6fa129b0"]]);var c=u,p=s(7139);const m={key:0,class:"posts-list"},h={class:"card_post"},g={class:"post_preview"},f=["src","alt"],v={class:"post_desc"},w={class:"post_author"},k={key:0,class:"card_badge_new"},_={key:2};function y(e,t,s,i,n,r){const l=(0,o.up)("SearchForm"),d=(0,o.up)("PersonalLike"),u=(0,o.up)("PostListCardControls"),c=(0,o.up)("a-card"),y=(0,o.up)("a-pagination"),b=(0,o.up)("a-spin");return(0,o.wg)(),(0,o.iD)(o.HY,null,[n.posts&&n.posts.length&&n.likes&&n.comments&&n.visits&&e.$store.state.auth.currentUser?((0,o.wg)(),(0,o.iD)("div",m,[(0,o.Wm)(l,{executor:r.searchHandler,class:"input_gr"},null,8,["executor"]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.pagList,(s=>((0,o.wg)(),(0,o.j4)(c,{class:(0,p.C_)(["card",{card_updated:s.updated}]),hoverable:"",size:"small",key:s.id,"data-id":s.id,onClick:(0,a.iM)(r.cardClick,["prevent"])},{default:(0,o.w5)((()=>[(0,o._)("div",h,[(0,o._)("div",g,[(0,o._)("img",{src:s.previewURL,alt:s.previewName},null,8,f)]),(0,o._)("div",v,[(0,o._)("h3",null,(0,p.zw)(s.title),1),(0,o._)("span",w,"by "+(0,p.zw)(s.author),1)])]),s.isNew?((0,o.wg)(),(0,o.iD)("div",k,"NEW")):(0,o.kq)("",!0),(0,o._)("div",{class:(0,p.C_)(["card_options",[{card_options_show:r.isMobile}]]),onClick:t[0]||(t[0]=(0,a.iM)((()=>{}),["stop"]))},[(0,o.Wm)(d,{parentUpd:r.updLike,postId:s.id,valueId:n.likes?.[s.id]?.[e.$store.state.auth.currentUser.uid]?.uid?n.likes[s.id][e.$store.state.auth.currentUser.uid].uid:""},null,8,["parentUpd","postId","valueId"]),(0,o.Wm)(u,{deleteCard:r.deleteCard,post:s},null,8,["deleteCard","post"])],2)])),_:2},1032,["class","data-id","onClick"])))),128))])):(0,o.kq)("",!0),n.posts&&n.filtered.length>n.itemLimit?((0,o.wg)(),(0,o.j4)(y,{key:1,total:n.filtered.length,current:n.currentPage,"onUpdate:current":t[1]||(t[1]=e=>n.currentPage=e),pageSize:n.itemLimit,"onUpdate:pageSize":t[2]||(t[2]=e=>n.itemLimit=e)},null,8,["total","current","pageSize"])):(0,o.kq)("",!0),n.posts&&!n.posts.length?((0,o.wg)(),(0,o.iD)("h1",_,"No posts yet")):(0,o.kq)("",!0),n.posts?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(b,{key:3,class:"loading",size:"large"}))],64)}s(7658);const b=e=>((0,o.dD)("data-v-3a1f7aed"),e=e(),(0,o.Cn)(),e),C={key:0,class:"card_controls"},L=b((()=>(0,o._)("span",null,"Edit",-1))),U=b((()=>(0,o._)("span",null,"Delete",-1))),F={class:"card_controls-link"};function D(e,t,s,a,i,n){const r=(0,o.up)("edit-outlined"),l=(0,o.up)("a-tooltip"),d=(0,o.up)("delete-outlined"),u=(0,o.up)("a-popconfirm");return e.$store.state.auth.currentUser&&e.$store.state.auth.currentUser.uid===s.post.uid?((0,o.wg)(),(0,o.iD)("div",C,[(0,o.Wm)(l,{placement:"top"},{title:(0,o.w5)((()=>[L])),default:(0,o.w5)((()=>[(0,o._)("a",{class:"card_controls-link",onClick:t[0]||(t[0]=(...e)=>n.handleEdit&&n.handleEdit(...e))},[(0,o.Wm)(r)])])),_:1}),(0,o.Wm)(u,{title:"Are you sure?","ok-text":"Yes","cancel-text":"No",onConfirm:n.handleConfirm,onCancel:n.handleCancel},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{placement:"bottom",overlayClassName:n.hiddenClass},{title:(0,o.w5)((()=>[U])),default:(0,o.w5)((()=>[(0,o._)("a",F,[(0,o.Wm)(d)])])),_:1},8,["overlayClassName"])])),_:1},8,["onConfirm","onCancel"])])):(0,o.kq)("",!0)}var W=s(3318),P=s(681),$=s(252);function S(){return(new Date).toISOString()}function I(e,t){const s=e.createdAt.toDate().getTime(),a=t.createdAt.toDate().getTime();return s-a}var N=s(65),Z=s(7795),x=s(9862),O=s(4287),q=s(1294);const j={apiKey:"AIzaSyDs2dm6pyah7VuaJ8_yJQ3pkW6XLY5WAOU",authDomain:"blog-85d3d.firebaseapp.com",projectId:"blog-85d3d",storageBucket:"blog-85d3d.appspot.com",messagingSenderId:"649337547146",appId:"1:649337547146:web:a0cbb15dc4256542be4073",measurementId:"G-S3NR9DDCV8"},M=(0,Z.ZF)(j),A=(0,x.v0)(),T=(0,O.ad)(),z=(0,q.cF)(M),H={page:1},R={posts:null};var J=(0,N.MT)({state:{auth:A,firestore:T,storage:z,pagination:H,data:R},getters:{},mutations:{setPage(e,t){e.pagination.page=t},setPosts(e,t){e.data.posts=t}},actions:{updatePageNumber({commit:e},t){e("setPage",t)},updatePosts({commit:e},t){e("setPosts",t)}}});const E="posts",V="comments",Y="likes",B="visits",G={"auth/user-not-found":"User not found","auth/invalid-email":"Invalid email","auth/wrong-password":"Wrong password","auth/email-already-in-use":"Email already in use","auth/too-many-requests":"Too many login attempts, please try again later"},{storage:K,firestore:Q,auth:X}=J.state;async function ee(e=X){return(0,x.w7)(e)}async function te(){const e=new x.hJ,t=await(0,x.rh)(X,e);return x.hJ.credentialFromResult(t),t}function se(e,t){return(0,x.e5)(X,e,t)}async function ae(e,t,s){const a=(0,x.v0)();return await(0,x.Xb)(a,t,s),await(0,x.ck)(a.currentUser,{displayName:e}),(0,x.w7)(a),se(t,s)}async function ie(e,t,s,a){let i=e.previewURL;"string"!=typeof a&&(await ye(`${e.id}/${e.previewName}`),i=await ue(a,e.id));const n={...e,title:t,body:s,previewURL:i,previewName:a.name||e.previewName,changedAt:(0,O.Bt)()},o=(0,O.JU)((0,O.hJ)(Q,E),e.id);return await(0,O.pl)(o,n,{merge:!0})}async function ne(e,t){await Ue(e,t),await de(e,t)}async function oe(e,t,s,a,i){const n=S(),o=await ue(i,n),r={id:n,uid:e,author:t,title:s,body:a,previewURL:o,previewName:i.name,createdAt:(0,O.Bt)()},l=(0,O.JU)((0,O.hJ)(Q,E),n);return await(0,O.pl)(l,r,{merge:!0})}async function re(e,t,s,a){const i=S(),n={id:i,uid:t,name:s,value:a,createdAt:(0,O.Bt)()},o={[i]:n},r=(0,O.JU)((0,O.hJ)(Q,V),e);return(0,O.pl)(r,o,{merge:!0})}async function le(e,t){const s=S(),a={id:s,uid:t,createdAt:(0,O.Bt)()},i={[t]:a},n=(0,O.JU)((0,O.hJ)(Q,Y),e);return(0,O.pl)(n,i,{merge:!0})}async function de(e,t){const s={uid:t,createdAt:(0,O.Bt)()},a={[t]:s},i=(0,O.JU)((0,O.hJ)(Q,B),e);return(0,O.pl)(i,a,{merge:!0})}async function ue(e,t){const s=`${t}/${e.name}`,a=(0,q.iH)(K,s);return await(0,q.KV)(a,e),await(0,q.Jt)(a)}async function ce(e){const t=(0,O.hJ)(Q,e),s=await(0,O.PL)(t),a=[];return s.empty||s.forEach((async e=>{const t=e.data();a.push(t)})),a}async function pe(e){const t=(0,O.hJ)(Q,e),s=await(0,O.PL)(t),a={};return s.empty||s.forEach((async e=>{const t=e.data();a[e.id]=t})),a}async function me(e,t){const s=(0,O.JU)(Q,t,e),a=await(0,O.QT)(s);return a.exists()?a.data():[]}function he(){return pe(V)}async function ge(e){const t=await me(e,V),s=[];for(const a in t)s.push(t[a]);return s.sort(I),s}function fe(){return pe(Y)}async function ve(e){const t=await me(e,Y),s={};for(const a in t)s[a]=t[a];return s}function we(){return ce(E)}function ke(e){return me(e,E)}function _e(){return pe(B)}async function ye(e){const t=(0,q.iH)(K,e);await(0,q.oq)(t)}async function be(e,t){await ye(`${e}/${t}`),await(0,O.oe)((0,O.JU)(Q,E,e)),await(0,O.oe)((0,O.JU)(Q,V,e)),await(0,O.oe)((0,O.JU)(Q,Y,e)),await(0,O.oe)((0,O.JU)(Q,B,e))}async function Ce(e,t){const s=(0,O.JU)(Q,V,t),a={[e]:(0,O.AK)()};return(0,O.pl)(s,a,{merge:!0})}async function Le(e,t){const s=(0,O.JU)(Q,Y,t),a={[e]:(0,O.AK)()};return(0,O.pl)(s,a,{merge:!0})}async function Ue(e,t){const s=(0,O.JU)(Q,B,e),a={[t]:(0,O.AK)()};return(0,O.pl)(s,a,{merge:!0})}function Fe(){return/Mobile/.test(navigator.userAgent)}var De={components:{EditOutlined:W.Z,DeleteOutlined:P.Z},props:{post:{type:Object,required:!0},deleteCard:{type:Function,required:!0}},computed:{isMobile(){return Fe()},hiddenClass(){return this.isMobile?"tooltip_hidden":""}},methods:{handleEdit(){const e=this.post.id;this.$router.push({name:"editpost",params:{id:e}})},handleDelete(){const e=this.post.previewName,t=this.post.id,s=document.querySelector(`[data-id="${t}"]`);s.classList.add("card_deleting_animation"),be(t,e).then((()=>{$.ZP.success(`Post "${this.post.title}" deleted`),this.$router.push({name:"main"})})).catch((e=>{$.ZP.error("Error: "+e.code)})),setTimeout((()=>{this.deleteCard(t)}),330)},handleConfirm(){this.handleDelete()},handleCancel(){}}};const We=(0,d.Z)(De,[["render",D],["__scopeId","data-v-3a1f7aed"]]);var Pe=We;const $e=e=>((0,o.dD)("data-v-d686dcd8"),e=e(),(0,o.Cn)(),e),Se={class:"card_like"},Ie=$e((()=>(0,o._)("span",null,"Liked",-1))),Ne=$e((()=>(0,o._)("span",null,"Not liked",-1)));function Ze(e,t,s,a,i,n){const r=(0,o.up)("HeartFilled"),l=(0,o.up)("a-tooltip"),d=(0,o.up)("HeartOutlined");return(0,o.wg)(),(0,o.iD)("div",Se,[(0,o._)("a",{onClick:t[0]||(t[0]=(...e)=>n.toggleLike&&n.toggleLike(...e)),class:(0,p.C_)(i.likeId?"card_like-btn__liked":"card_like-btn__notliked")},[i.likeId?((0,o.wg)(),(0,o.j4)(l,{key:0,placement:"top",overlayClassName:n.hiddenClass},{title:(0,o.w5)((()=>[Ie])),default:(0,o.w5)((()=>[(0,o.Wm)(r)])),_:1},8,["overlayClassName"])):((0,o.wg)(),(0,o.j4)(l,{key:1,placement:"top",overlayClassName:n.hiddenClass},{title:(0,o.w5)((()=>[Ne])),default:(0,o.w5)((()=>[(0,o.Wm)(d)])),_:1},8,["overlayClassName"]))],2)])}var xe=s(8919),Oe=s(3300),qe={components:{HeartFilled:xe.Z,HeartOutlined:Oe.Z},props:{parentUpd:{type:Function},postId:{type:String,required:!0},valueId:{type:String}},data(){return{likeId:null}},computed:{isMobile(){return Fe()},hiddenClass(){return this.isMobile?"tooltip_hidden":""}},methods:{async updateLikeId(e){const t=await ve(this.postId);this.likeId=this.findLike(e,t)},findLike(e,t){return t[e]?.uid},toggleLike(){if(this.likeId)Le(this.likeId,this.postId),this.likeId=null;else{const e=this.$store.state.auth.currentUser.uid;le(this.postId,e).then((()=>{this.updateLikeId(e)}))}this.parentUpd&&this.parentUpd(this.postId)}},created(){this.valueId?this.likeId=this.valueId:this.updateLikeId(this.$store.state.auth.currentUser.uid)}};const je=(0,d.Z)(qe,[["render",Ze],["__scopeId","data-v-d686dcd8"]]);var Me=je;const Ae=e=>((0,o.dD)("data-v-6dc485da"),e=e(),(0,o.Cn)(),e),Te=Ae((()=>(0,o._)("span",null,"Like filter On",-1))),ze=Ae((()=>(0,o._)("span",null,"Like filter Off",-1))),He={class:"search-group-box_selects"},Re=Ae((()=>(0,o._)("span",null,"Time filter",-1)));function Je(e,t,s,a,i,n){const r=(0,o.up)("HeartFilled"),l=(0,o.up)("a-tooltip"),d=(0,o.up)("HeartOutlined"),u=(0,o.up)("a-input"),c=(0,o.up)("a-select-option"),p=(0,o.up)("a-select"),m=(0,o.up)("a-input-group");return(0,o.wg)(),(0,o.j4)(m,{compact:"",class:"search-group-box"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{"allow-clear":"",value:i.searchVal,"onUpdate:value":t[0]||(t[0]=e=>i.searchVal=e),placeholder:`${i.selectType} search`},{suffix:(0,o.w5)((()=>[i.likedFilter?((0,o.wg)(),(0,o.j4)(l,{key:0,placement:"top"},{title:(0,o.w5)((()=>[Te])),default:(0,o.w5)((()=>[(0,o.Wm)(r,{onClick:n.toggleLike,class:"search-group-box_liked"},null,8,["onClick"])])),_:1})):((0,o.wg)(),(0,o.j4)(l,{key:1,placement:"top"},{title:(0,o.w5)((()=>[ze])),default:(0,o.w5)((()=>[(0,o.Wm)(d,{onClick:n.toggleLike,class:"search-group-box_notliked"},null,8,["onClick"])])),_:1}))])),_:1},8,["value","placeholder"]),(0,o._)("div",He,[(0,o.Wm)(p,{value:i.selectType,"onUpdate:value":t[1]||(t[1]=e=>i.selectType=e),class:"search-group-box_select"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{value:"title"},{default:(0,o.w5)((()=>[(0,o.Uk)("title")])),_:1}),(0,o.Wm)(c,{value:"author"},{default:(0,o.w5)((()=>[(0,o.Uk)("author")])),_:1})])),_:1},8,["value"]),(0,o.Wm)(l,{placement:"top",overlayClassName:n.hiddenClass},{title:(0,o.w5)((()=>[Re])),default:(0,o.w5)((()=>[(0,o.Wm)(p,{value:i.timeFilter,"onUpdate:value":t[2]||(t[2]=e=>i.timeFilter=e),class:"search-group-box_select-time"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{value:"all"},{default:(0,o.w5)((()=>[(0,o.Uk)("all time")])),_:1}),(0,o.Wm)(c,{value:"year"},{default:(0,o.w5)((()=>[(0,o.Uk)("year")])),_:1}),(0,o.Wm)(c,{value:"month"},{default:(0,o.w5)((()=>[(0,o.Uk)("month")])),_:1}),(0,o.Wm)(c,{value:"week"},{default:(0,o.w5)((()=>[(0,o.Uk)("week")])),_:1}),(0,o.Wm)(c,{value:"day"},{default:(0,o.w5)((()=>[(0,o.Uk)("day")])),_:1}),(0,o.Wm)(c,{value:"hour"},{default:(0,o.w5)((()=>[(0,o.Uk)("hour")])),_:1})])),_:1},8,["value"])])),_:1},8,["overlayClassName"])])])),_:1})}var Ee={components:{HeartFilled:xe.Z,HeartOutlined:Oe.Z},props:{executor:{type:Function,required:!0}},data(){return{searchVal:"",selectType:"title",timeFilter:"all",likedFilter:!1}},computed:{isMobile(){return Fe()||window.innerWidth<=400},hiddenClass(){return this.isMobile?"tooltip_hidden":""}},methods:{toggleLike(){this.likedFilter=!this.likedFilter}},watch:{searchVal(e){sessionStorage.searchVal=e,this.executor(e,this.selectType,this.timeFilter,this.likedFilter)},selectType(e){sessionStorage.selectType=e,this.executor(this.searchVal,e,this.timeFilter,this.likedFilter)},timeFilter(e){sessionStorage.timeFilter=e,this.executor(this.searchVal,this.selectType,e,this.likedFilter)},likedFilter(e){e?sessionStorage.likedFilter=e:delete sessionStorage.likedFilter,this.executor(this.searchVal,this.selectType,this.timeFilter,e)}},created(){sessionStorage.searchVal&&(this.searchVal=sessionStorage.searchVal),sessionStorage.selectType&&(this.selectType=sessionStorage.selectType),sessionStorage.timeFilter&&(this.timeFilter=sessionStorage.timeFilter),sessionStorage.likedFilter&&(this.likedFilter=!0)}};const Ve=(0,d.Z)(Ee,[["render",Je],["__scopeId","data-v-6dc485da"]]);var Ye=Ve;function Be(e,t){const s=new Date,a=new Date;switch(t){case"all":return!0;case"year":a.setMonth(a.getMonth()-12);break;case"month":a.setMonth(s.getMonth()-1);break;case"week":a.setDate(s.getDate()-7);break;case"day":a.setDate(s.getDate()-1);break;case"hour":a.setTime(a.getTime()-36e5);break;default:return!1}return!(e>s||e<a)}const Ge=1920,Ke=160,Qe=91,Xe=48,et=255,tt=88,st=10;function at(){const e=Math.min(window.innerWidth,Ge)-Xe,t=window.innerHeight-st-Ke-Qe,s=Math.floor(t/(tt+st)),a=Math.floor(e/et),i=a*et+(a-1)*st,n=(i<=e?a:a-1)||1,o=s*n;return o}var it={components:{PersonalLike:Me,PostListCardControls:Pe,SearchForm:Ye},data(){return{posts:this.$store.state.data.posts,filtered:[],timefiltered:[],timeFilter:"all",likes:null,likedFilter:!1,comments:null,visits:null,currentPage:this.$store.state.pagination.page,itemLimit:50,pagList:null}},computed:{isMobile(){return Fe()}},methods:{setFilteredPosts(e){this.filtered=e},cardClick(e){if("card_delete"===e.target.class)return;const t=e.target.closest(".card"),s=t.dataset.id;this.$router.push({name:E,params:{id:s}})},isNew(e){if(e.uid!==this.$store.state.auth.currentUser.uid)return!this.visits[e.id]?.[this.$store.state.auth.currentUser.uid]?.createdAt},checkPostChanges(e){const t=e?.changedAt?.toDate(),s=this.visits[e.id]?.[this.$store.state.auth.currentUser.uid]?.createdAt?.toDate(),a=Object.entries(this.comments[e.id]??[]).sort(((e,t)=>e[1].createdAt.toDate()-t[1].createdAt.toDate())),i=a[a.length-1]?.[1]?.createdAt?.toDate();return!!(a.length&&i>s)||!(s&&!(t&&t>s)||e.uid===this.$store.state.auth.currentUser.uid)},updLike(e){const t=this.$store.state.auth.currentUser.uid;this.likes[e]?.[t]?(this.likedFilter&&(this.filtered=this.filtered.filter((t=>e!==t.id))),delete this.likes[e]?.[t]):this.likes[e]?this.likes[e][t]={uid:t}:this.likes[e]={[t]:{uid:t}},this.pagListUpd()},searchHandler(e,t,s,a){let i;s!==this.timeFilter&&(i=this.posts.filter((e=>Be(e.createdAt.toDate(),s))),this.timeFilter=s,this.timefiltered=i);let n=[];if(this.likedFilter=a,a)for(let o of this.timefiltered)this.likes[o.id]?.[this.$store.state.auth.currentUser.uid]&&n.push(o);else n=this.timefiltered;i=n.filter((s=>s?.[t].toLowerCase().includes(e.toLowerCase()))),this.setFilteredPosts(i),this.pagListUpd()},deleteCard(e){this.setFilteredPosts(this.filtered.filter((t=>t.id!==e))),this.timefiltered=this.timefiltered.filter((t=>t.id!==e)),this.posts=this.posts.filter((t=>t.id!==e)),this.pagListUpd()},pagListUpd(){if(this.filtered.length<=this.itemLimit)this.currentPage=1;else{const e=Math.ceil(this.filtered.length/this.itemLimit);this.currentPage>e&&(this.currentPage=e)}this.pagList=this.filtered.filter(((e,t)=>t+1<=this.itemLimit*this.currentPage&&t+1>this.itemLimit*this.currentPage-this.itemLimit))},updCardsNumber(){this.isMobile||(this.itemLimit=at())},resizeUpd(){this.updCardsNumber(),this.pagListUpd()}},watch:{currentPage(e){this.$store.dispatch("updatePageNumber",e),this.pagListUpd()}},created(){const e=we(),t=fe(),s=he(),a=_e();Promise.all([e,t,s,a]).then((e=>{let[t,s,a,i]=e;this.likes=s,this.comments=a,this.visits=i,t.forEach((e=>{e.updated=this.checkPostChanges(e),e.isNew=this.isNew(e)})),t=t.reverse(),this.setFilteredPosts(t),this.timefiltered=t,this.posts=t,this.$store.dispatch("updatePosts",this.posts),this.pagListUpd()})).catch((()=>{}))},beforeMount(){this.updCardsNumber()},mounted(){window.addEventListener("resize",this.resizeUpd)},beforeUnmount(){window.removeEventListener("resize",this.resizeUpd)}};const nt=(0,d.Z)(it,[["render",y],["__scopeId","data-v-52ab53f8"]]);var ot=nt;const rt={class:"form_container"},lt={class:"form_controls-container"};function dt(e,t,s,a,i,n){const r=(0,o.up)("UserOutlined"),l=(0,o.up)("a-input"),d=(0,o.up)("a-form-item"),u=(0,o.up)("MailOutlined"),c=(0,o.up)("LockOutlined"),p=(0,o.up)("a-input-password"),m=(0,o.up)("a-button"),h=(0,o.up)("a-form");return(0,o.wg)(),(0,o.iD)("div",rt,[(0,o.Wm)(h,{class:"form",ref:"formRef",name:"custom-validation",model:e.formState,rules:e.rules,onFinish:e.handleFinish,onValidate:e.handleValidate,onFinishFailed:e.handleFinishFailed},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{"has-feedback":"",name:"name"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{value:e.formState.name,"onUpdate:value":t[0]||(t[0]=t=>e.formState.name=t),placeholder:"Username",autocomplete:"off",disabled:e.isLoading},{prefix:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"form_icon"})])),_:1},8,["value","disabled"])])),_:1}),(0,o.Wm)(d,{"has-feedback":"",name:"email"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{value:e.formState.email,"onUpdate:value":t[1]||(t[1]=t=>e.formState.email=t),placeholder:"Email",autocomplete:"off",disabled:e.isLoading},{prefix:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"form_icon"})])),_:1},8,["value","disabled"])])),_:1}),(0,o.Wm)(d,{"has-feedback":"",name:"pass"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{value:e.formState.pass,"onUpdate:value":t[2]||(t[2]=t=>e.formState.pass=t),type:"password",placeholder:"Password",autocomplete:"off",disabled:e.isLoading},{prefix:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"form_icon"})])),_:1},8,["value","disabled"])])),_:1}),(0,o.Wm)(d,{"has-feedback":"",name:"checkPass"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{value:e.formState.checkPass,"onUpdate:value":t[3]||(t[3]=t=>e.formState.checkPass=t),placeholder:"Confirm password",type:"password",autocomplete:"off",disabled:e.isLoading},{prefix:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"form_icon"})])),_:1},8,["value","disabled"])])),_:1}),(0,o.Wm)(d,{class:"form_controls"},{default:(0,o.w5)((()=>[(0,o._)("div",lt,[(0,o.Wm)(m,{loading:e.isLoading,disabled:""===e.formState.name||""===e.formState.email||""===e.formState.pass||""===e.formState.checkPass,type:"primary","html-type":"submit"},{default:(0,o.w5)((()=>[(0,o.Uk)("Submit")])),_:1},8,["loading","disabled"]),(0,o.Wm)(m,{loading:e.isLoading,onClick:e.resetForm},{default:(0,o.w5)((()=>[(0,o.Uk)("Reset")])),_:1},8,["loading","onClick"])])])),_:1})])),_:1},8,["model","rules","onFinish","onValidate","onFinishFailed"])])}var ut=s(8896),ct=s(2329),pt=s(8795);const mt=/^[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+.[a-zA-Z]{2,}$/;var ht=s(4870),gt=(0,o.aZ)({components:{UserOutlined:ut.Z,MailOutlined:ct.Z,LockOutlined:pt.Z},setup(){const e=(0,n.tv)(),t=(0,ht.iH)(),s=(0,ht.iH)(!1),a=(0,ht.qj)({name:"",email:"",pass:"",checkPass:""}),i=async(e,t)=>t?Promise.resolve():Promise.reject("Name is required"),o=async(e,t)=>t.match(mt)?Promise.resolve():Promise.reject("Not valid email"),r=async(e,s)=>""===s?Promise.reject("Please input the password"):s.length>=6?(""!==a.checkPass&&t.value.validateFields("checkPass"),Promise.resolve()):Promise.reject("Password from 6 characters"),l=async(e,t)=>""===t?Promise.reject("Please input the password again"):t!==a.pass?Promise.reject("Two inputs don't match!"):Promise.resolve(),d={name:[{required:!0,validator:i,trigger:"change"}],email:[{required:!0,validator:o,trigger:"change"}],pass:[{required:!0,validator:r,trigger:"change"}],checkPass:[{required:!0,validator:l,trigger:"change"}]},u=()=>{t.value.resetFields()},c=({name:t,email:a,pass:i})=>{s.value=!0,ae(t,a,i).then((()=>{e.push({name:"main"})})).catch((e=>{$.ZP.error(G[e.code])})).finally((()=>{u(),s.value=!1}))},p=e=>{console.log(e)},m=()=>{};return{formState:a,formRef:t,rules:d,isLoading:s,handleFinishFailed:p,handleFinish:c,resetForm:u,handleValidate:m}}});const ft=(0,d.Z)(gt,[["render",dt],["__scopeId","data-v-1fe38c3b"]]);var vt=ft;const wt=e=>((0,o.dD)("data-v-d649b946"),e=e(),(0,o.Cn)(),e),kt={class:"sign_container"},_t=wt((()=>(0,o._)("div",{class:"line"},null,-1)));function yt(e,t,s,a,i,n){const r=(0,o.up)("GoogleOutlined"),l=(0,o.up)("a-button"),d=(0,o.up)("MailOutlined"),u=(0,o.up)("a-input"),c=(0,o.up)("a-form-item"),p=(0,o.up)("LockOutlined"),m=(0,o.up)("a-input-password"),h=(0,o.up)("a-form");return(0,o.wg)(),(0,o.iD)("div",kt,[(0,o.Wm)(l,{onClick:e.handleLoginGoogle,loading:e.isGooLoading,disabled:e.isGooLoading||e.isDefLoading,class:"sign_google"},{icon:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"sign_google-icon"})])),_:1},8,["onClick","loading","disabled"]),_t,(0,o.Wm)(h,{class:"form",model:e.formState,onFinish:e.handleFinish,onFinishFailed:e.handleFinishFailed},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{value:e.formState.email,"onUpdate:value":t[0]||(t[0]=t=>e.formState.email=t),placeholder:"Email",disabled:e.isGooLoading||e.isDefLoading},{prefix:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"sign_icon"})])),_:1},8,["value","disabled"])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{value:e.formState.pass,"onUpdate:value":t[1]||(t[1]=t=>e.formState.pass=t),type:"password",placeholder:"Password",disabled:e.isGooLoading||e.isDefLoading},{prefix:(0,o.w5)((()=>[(0,o.Wm)(p,{class:"sign_icon"})])),_:1},8,["value","disabled"])])),_:1}),(0,o.Wm)(c,{class:"sign_default"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{class:"sign_default-btn",type:"primary","html-type":"submit",loading:e.isDefLoading,disabled:""===e.formState.user||""===e.formState.pass||e.isGooLoading||e.isDefLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Log in ")])),_:1},8,["loading","disabled"])])),_:1})])),_:1},8,["model","onFinish","onFinishFailed"])])}var bt=s(7866),Ct=(0,o.aZ)({components:{MailOutlined:ct.Z,LockOutlined:pt.Z,GoogleOutlined:bt.Z},setup(){const e=(0,n.tv)(),t=(0,ht.iH)(!1),s=(0,ht.iH)(!1),a=(0,ht.qj)({email:"",pass:""}),i=()=>{s.value=!0,se(a.email,a.pass).then((t=>{sessionStorage.user=t.user.uid,e.push({name:"main"})})).catch((e=>{$.ZP.error(G[e.code])})).finally((()=>{setTimeout((()=>{s.value=!1}),1e3)}))},o=e=>{console.log(e)},r=()=>{t.value=!0,te().then((t=>{sessionStorage.user=t.user.uid,e.push({name:"main"})})).catch((e=>{$.ZP.error(G[e.code])})).finally((()=>{setTimeout((()=>{t.value=!1}),1e3)}))};return{isGooLoading:t,isDefLoading:s,formState:a,handleFinish:i,handleFinishFailed:o,handleLoginGoogle:r}}});const Lt=(0,d.Z)(Ct,[["render",yt],["__scopeId","data-v-d649b946"]]);var Ut=Lt;const Ft={key:0,class:"post_container"},Dt={class:"post"},Wt={class:"post_preview"},Pt=["src","alt"],$t={class:"post_col"},St={class:"post_title"},It={class:"post_author-container"},Nt={class:"post_author"},Zt={class:"post_date"},xt={class:"post_body"},Ot={key:0,class:"post_upd"},qt={class:"post_row"},jt={class:"post_likes"},Mt={key:0},At={key:0,class:"post_controls"};function Tt(e,t,s,a,i,n){const r=(0,o.up)("HeartFilled"),l=(0,o.up)("a-button"),d=(0,o.up)("a-popconfirm"),u=(0,o.up)("ComList"),c=(0,o.up)("a-spin");return(0,o.wg)(),(0,o.iD)(o.HY,null,[i.post?((0,o.wg)(),(0,o.iD)("div",Ft,[(0,o._)("div",Dt,[(0,o._)("div",Wt,[(0,o._)("img",{src:i.post.previewURL,alt:i.post.previewName},null,8,Pt)]),(0,o._)("div",$t,[(0,o._)("h2",St,(0,p.zw)(i.post.title),1),(0,o._)("span",It,[(0,o._)("span",Nt," by "+(0,p.zw)(i.post.author),1),(0,o._)("span",Zt,(0,p.zw)(n.getMessageDate(i.post.createdAt)),1)]),(0,o._)("p",xt,(0,p.zw)(i.post.body),1),i.post.changedAt?((0,o.wg)(),(0,o.iD)("p",Ot," upd. "+(0,p.zw)(n.getMessageDate(i.post.changedAt)),1)):(0,o.kq)("",!0)])]),(0,o._)("div",qt,[(0,o._)("div",jt,[(0,o.Wm)(l,{type:"text",class:(0,p.C_)(i.likeIdPressed?"post_likes-pressed":"post_likes-icon"),onClick:n.handleToggleLike},{icon:(0,o.w5)((()=>[(0,o.Wm)(r)])),_:1},8,["class","onClick"]),i.likes?((0,o.wg)(),(0,o.iD)("strong",Mt,(0,p.zw)(Object.keys(i.likes).length),1)):(0,o.kq)("",!0)]),e.$store.state.auth.currentUser&&e.$store.state.auth.currentUser.uid===i.post.uid?((0,o.wg)(),(0,o.iD)("div",At,[(0,o.Wm)(l,{disabled:i.isLoading,onClick:n.handleEdit},{default:(0,o.w5)((()=>[(0,o.Uk)("Edit")])),_:1},8,["disabled","onClick"]),(0,o.Wm)(d,{title:"Are you sure?","ok-text":"Yes","cancel-text":"No",onConfirm:n.handleDelete},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{loading:i.isLoading},{default:(0,o.w5)((()=>[(0,o.Uk)("Delete")])),_:1},8,["loading"])])),_:1},8,["onConfirm"])])):(0,o.kq)("",!0)]),i.isLoading?((0,o.wg)(),(0,o.j4)(c,{key:1,size:"large",class:"loading-comments"})):((0,o.wg)(),(0,o.j4)(u,{key:0,id:i.post.id},null,8,["id"]))])):(0,o.kq)("",!0),i.post?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(c,{key:1,size:"large",class:"loading"}))],64)}const zt=e=>((0,o.dD)("data-v-6b8367b8"),e=e(),(0,o.Cn)(),e),Ht={key:0,class:"post_comments"},Rt=["data-comment-id"],Jt={class:"comment_author"},Et={class:"comment_date"},Vt={class:"comment_body"},Yt=zt((()=>(0,o._)("span",null,"Delete",-1))),Bt=["data-id","data-postid"],Gt={key:1,class:"comment_delete"},Kt={key:1};function Qt(e,t,s,i,n,r){const l=(0,o.up)("a-tooltip"),d=(0,o.up)("a-spin"),u=(0,o.up)("ComForm");return(0,o.wg)(),(0,o.iD)(o.HY,null,[n.comments?((0,o.wg)(),(0,o.iD)("div",Ht,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.comments,(i=>((0,o.wg)(),(0,o.iD)("div",{class:"comment",key:i.id,"data-comment-id":i.id},[(0,o._)("div",null,[(0,o._)("span",Jt,(0,p.zw)(i.name),1),(0,o._)("div",Et,[(0,o._)("span",null,(0,p.zw)(r.getMessageDate(i.createdAt)),1)])]),(0,o._)("span",Vt,(0,p.zw)(i.value),1),n.isDeleting?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(l,{key:0,placement:"left"},{title:(0,o.w5)((()=>[Yt])),default:(0,o.w5)((()=>[e.$store.state.auth.currentUser&&i.uid===e.$store.state.auth.currentUser.uid?((0,o.wg)(),(0,o.iD)("div",{key:0,"data-id":i.id,"data-postid":s.id,class:"comment_delete",onClick:t[0]||(t[0]=(0,a.iM)(((...e)=>r.handleDelete&&r.handleDelete(...e)),["stop"]))}," ✖ ",8,Bt)):(0,o.kq)("",!0)])),_:2},1024)),n.isDeleting&&e.$store.state.auth.currentUser&&i.uid===e.$store.state.auth.currentUser.uid?((0,o.wg)(),(0,o.iD)("div",Gt," ✖ ")):(0,o.kq)("",!0)],8,Rt)))),128))])):(0,o.kq)("",!0),n.comments&&!n.comments.length?((0,o.wg)(),(0,o.iD)("h2",Kt,"No comments yet")):(0,o.kq)("",!0),n.comments?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(d,{key:2,class:"loading"})),n.comments?((0,o.wg)(),(0,o.j4)(u,{key:3,upd:r.update,id:s.id},null,8,["upd","id"])):(0,o.kq)("",!0)],64)}const Xt={class:"comment_form"};function es(e,t,s,a,i,n){const r=(0,o.up)("a-input"),l=(0,o.up)("a-button");return(0,o.wg)(),(0,o.iD)("form",Xt,[(0,o.Wm)(r,{value:e.value,"onUpdate:value":t[0]||(t[0]=t=>e.value=t),"auto-size":{minRows:1,maxRows:5},placeholder:"your comment",disabled:e.isLoading,ref:"inputRef"},null,8,["value","disabled"]),(0,o.Wm)(l,{class:"comment_btn","html-type":"submit",onClick:e.submit,loading:e.isLoading,disabled:!e.value},{default:(0,o.w5)((()=>[(0,o.Uk)("Submit")])),_:1},8,["onClick","loading","disabled"])])}var ts=(0,o.aZ)({props:{id:{type:String,required:!0},upd:{type:Function,required:!0}},setup(){const e=(0,ht.iH)(""),t=(0,ht.iH)(!1),s=(0,ht.iH)();return{value:e,isLoading:t,inputRef:s}},methods:{focusInput(){this.inputRef.focus()},submit(e){if(e.preventDefault(),!this.value)return;const t=this.$store.state.auth.currentUser.uid,s=this.$store.state.auth.currentUser.displayName;this.isLoading=!0,re(this.id,t,s,this.value).then((async()=>{this.isLoading=!1,this.value="",await this.upd(),this.focusInput(),ne(this.id,t)}))}},mounted(){this.focusInput()}});const ss=(0,d.Z)(ts,[["render",es],["__scopeId","data-v-fb773808"]]);var as=ss;function is(e){const t=e.toDate(),s=t.getDate(),a=ns[t.getMonth()],i=t.getFullYear(),n=t.getHours();let o=t.getMinutes();const r=o>9?o:`0${o}`;return`(${s} ${a} ${i}) at ${n}:${r}`}const ns=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];var os={components:{ComForm:as},props:{id:{type:String,required:!0}},data(){return{comments:null,isDeleting:!1}},methods:{setComments(e){this.comments=e},getMessageDate(e){return is(e)},handleDelete(e){this.isDeleting=!0;const t=e.target.dataset.id,s=e.target.dataset.postid,a=document.querySelector(`[data-comment-id="${t}"]`);a.classList.add("comment_deleting_animation"),setTimeout((()=>{this.isDeleting=!1,Ce(t,s),this.setComments(this.comments.filter((e=>e.id!==t)))}),330)},update(){ge(this.id).then((e=>{this.setComments(e)}))}},created(){this.update()}};const rs=(0,d.Z)(os,[["render",Qt],["__scopeId","data-v-6b8367b8"]]);var ls=rs,ds={components:{ComList:ls,HeartFilled:xe.Z},data(){return{post:null,likes:null,likeIdPressed:!1,isLoading:!1}},methods:{setPost(e){this.post=e},getMessageDate(e){return is(e)},checkLikePressed(e){return this.likes[e]?.uid},handleToggleLike(){if(this.likeIdPressed)Le(this.likeIdPressed,this.post.id).then((()=>{this.updateLikes()}));else{const e=this.$store.state.auth.currentUser.uid;le(this.post.id,e).then((()=>{this.updateLikes()}))}},handleEdit(){const e=this.post.id;this.$router.push({name:"editpost",params:{id:e}})},handleDelete(){this.isLoading=!0;const e=this.post.id,t=this.post.previewName;be(e,t).then((()=>{this.isLoading=!1,this.$router.push({name:"main"})}))},async updateLikes(){this.likes=await ve(this.post.id),this.likeIdPressed=this.checkLikePressed(this.$store.state.auth.currentUser.uid)},update(){const e=this.$route.params.id;ne(e,this.$store.state.auth.currentUser.uid),ke(e).then((e=>{this.setPost(e),this.updateLikes()}))}},created(){this.update()}};const us=(0,d.Z)(ds,[["render",Tt],["__scopeId","data-v-0c4117e4"]]);var cs=us;const ps={class:"create-edit_form"},ms={class:"form_controls"};function hs(e,t,s,i,n,r){const l=(0,o.up)("PostForm"),d=(0,o.up)("a-button");return(0,o.wg)(),(0,o.iD)("form",ps,[(0,o.Wm)(l,{ref:"postFormRef"},null,512),(0,o._)("div",ms,[(0,o.Wm)(d,{"html-type":"submit",onClick:(0,a.iM)(e.submit,["prevent"]),disabled:e.isLoading,loading:e.isLoading},{default:(0,o.w5)((()=>[(0,o.Uk)("Submit")])),_:1},8,["onClick","disabled","loading"]),(0,o.Wm)(d,{disabled:e.isLoading,onClick:e.resetForms},{default:(0,o.w5)((()=>[(0,o.Uk)("Reset")])),_:1},8,["disabled","onClick"])])])}const gs=e=>((0,o.dD)("data-v-4b20688d"),e=e(),(0,o.Cn)(),e),fs={class:"create-edit_inputs"},vs={class:"form_text"},ws=gs((()=>(0,o._)("br",null,null,-1)));function ks(e,t,s,a,i,n){const r=(0,o.up)("ImageForm"),l=(0,o.up)("a-input"),d=(0,o.up)("a-textarea");return(0,o.wg)(),(0,o.iD)("div",fs,[(0,o.Wm)(r,{ref:"imageFormRef",source:e.post?.previewURL,returnImageFile:e.setPreviewImage},null,8,["source","returnImageFile"]),(0,o._)("div",vs,[(0,o.Wm)(l,{value:e.title,"onUpdate:value":t[0]||(t[0]=t=>e.title=t),"show-count":"",maxlength:25,placeholder:"title",disabled:e.isLoading,"allow-clear":""},null,8,["value","disabled"]),ws,(0,o.Wm)(d,{value:e.body,"onUpdate:value":t[1]||(t[1]=t=>e.body=t),"auto-size":{minRows:9,maxRows:9},placeholder:"message",disabled:e.isLoading,"allow-clear":""},null,8,["value","disabled"])])])}const _s=["src"];function ys(e,t,s,i,n,r){const l=(0,o.up)("a-empty"),d=(0,o.up)("a-input"),u=(0,o.up)("CloseCircleFilled");return(0,o.wg)(),(0,o.iD)("div",{class:"form_image",onClick:t[0]||(t[0]=(0,a.iM)(((...t)=>e.openInput&&e.openInput(...t)),["stop"]))},[(0,o.wy)((0,o._)("img",{id:"preview",src:e.src,alt:"preview"},null,8,_s),[[a.F8,e.src]]),e.src?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(l,{key:0,description:null})),(0,o.Wm)(d,{id:"input",hidden:"",onChange:e.changeInput,type:"file",accept:".png, .jpg, .jpeg"},null,8,["onChange"]),e.src?((0,o.wg)(),(0,o.j4)(u,{key:1,onClick:(0,a.iM)(e.reset,["stop"]),class:"form_image-reset"},null,8,["onClick"])):(0,o.kq)("",!0)])}var bs=s(5956),Cs=(0,o.aZ)({components:{CloseCircleFilled:bs.Z},props:{source:{type:String},returnImageFile:{type:Function,required:!0}},data(){return{src:this.source||""}},methods:{reset(){this.src="",this.returnImageFile(this.src)},openInput(){const e=document.querySelector("#input");e.click()},changeInput(e){if(!e.target.files.length)return;const t=Array.from(e.target.files)[0];this.returnImageFile(t);const s=new FileReader;s.onload=e=>{this.src=e.target.result},s.readAsDataURL(t)}},watch:{source(){this.src=this.source}}});const Ls=(0,d.Z)(Cs,[["render",ys],["__scopeId","data-v-7bf6ba61"]]);var Us=Ls,Fs=(0,o.aZ)({components:{ImageForm:Us},props:{post:{type:Object,default:null}},data(){return{isLoading:!1,preview:null,title:"",body:""}},methods:{setPreviewImage(e){this.preview=e},getFormParams(){const{title:e,body:t,preview:s}=this;return{title:e,body:t,preview:s}},reset(){this.title="",this.body="",this.$refs.imageFormRef.reset(),this.preview=null}},mounted(){this.post&&(this.preview=this.post.previewURL,this.title=this.post.title,this.body=this.post.body)}});const Ds=(0,d.Z)(Fs,[["render",ks],["__scopeId","data-v-4b20688d"]]);var Ws=Ds,Ps=(0,o.aZ)({components:{PostForm:Ws},data(){return{isLoading:!1}},methods:{getFormParams(){return this.$refs.postFormRef.getFormParams()},resetForms(){this.$refs.postFormRef.reset()},submit(){const{title:e,body:t,preview:s}=this.getFormParams();if(!e||!t||!s)return;this.isLoading=!0;const a=this.$store.state.auth.currentUser.uid,i=this.$store.state.auth.currentUser.displayName;oe(a,i,e,t,s).then((()=>{$.ZP.success(`Post "${e}" added`),this.resetForms()})).finally((()=>{this.isLoading=!1}))}}});const $s=(0,d.Z)(Ps,[["render",hs],["__scopeId","data-v-3ef95e30"]]);var Ss=$s;const Is={key:0,class:"create-edit_form"},Ns={class:"form_controls"};function Zs(e,t,s,i,n,r){const l=(0,o.up)("PostForm"),d=(0,o.up)("a-button"),u=(0,o.up)("a-popconfirm"),c=(0,o.up)("a-spin");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.post?((0,o.wg)(),(0,o.iD)("form",Is,[(0,o.Wm)(l,{post:e.post,ref:"postFormRef"},null,8,["post"]),(0,o._)("div",Ns,[(0,o.Wm)(d,{"html-type":"submit",onClick:(0,a.iM)(e.submit,["prevent"]),disabled:e.isDeleting||e.isLoading,loading:e.isLoading},{default:(0,o.w5)((()=>[(0,o.Uk)("Submit")])),_:1},8,["onClick","disabled","loading"]),e.post?((0,o.wg)(),(0,o.j4)(u,{key:0,title:"Are you sure?","ok-text":"Yes","cancel-text":"No",onConfirm:e.handleDelete},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{loading:e.isDeleting,disabled:e.isDeleting||e.isLoading},{default:(0,o.w5)((()=>[(0,o.Uk)("Delete")])),_:1},8,["loading","disabled"])])),_:1},8,["onConfirm"])):(0,o.kq)("",!0)])])):(0,o.kq)("",!0),e.post?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(c,{key:1,size:"large"}))],64)}var xs=(0,o.aZ)({components:{PostForm:Ws},data(){return{isLoading:!1,isDeleting:!1,post:""}},methods:{getFormParams(){return this.$refs.postFormRef.getFormParams()},submit(){const{title:e,body:t,preview:s}=this.getFormParams();e&&t&&s&&(this.isLoading=!0,ie(this.post,e,t,s).then((()=>{$.ZP.success(`Post "${this.post.title}" changed`)})).finally((()=>{this.isLoading=!1;const e=this.post.id;this.$router.push({name:E,params:{id:e}})})))},handleDelete(){this.isDeleting=!0;const e=this.post.id,t=this.post.previewName;be(e,t).then((()=>{$.ZP.success(`Post "${this.post.title}" deleted`),this.$router.push({name:"main"})})).finally((()=>{this.isDeleting=!1}))}},mounted(){ke(this.$route.params.id).then((e=>{this.post=e})).catch((()=>{this.$router.push({name:"error"})}))}});const Os=(0,d.Z)(xs,[["render",Zs],["__scopeId","data-v-ed944128"]]);var qs=Os;const js=[{path:"/",name:"main",component:ot},{path:"/posts/:id",name:"posts",component:cs},{path:"/signin",name:"signin",component:Ut},{path:"/register",name:"register",component:vt},{path:"/createpost",name:"createpost",component:Ss},{path:"/editpost/:id",name:"editpost",component:qs},{path:"/error",name:"error",component:c},{path:"/:catchAll(.*)",name:"notfound",component:c}],Ms=(0,n.p7)({routes:js,history:(0,n.r5)()});Ms.beforeEach(((e,t,s)=>{J.state.auth.currentUser||("signin"!=e.name&&"register"!=e.name?s({name:"signin"}):s()),J.state.auth.currentUser&&(sessionStorage.page=e.path,"signin"==e.name||"register"==e.name?s({name:"main"}):s())}));var As=Ms;const Ts={key:1,class:"app_container"},zs={id:"content"};function Hs(e,t,s,a,i,n){const r=(0,o.up)("a-spin"),l=(0,o.up)("NavBar"),d=(0,o.up)("router-view");return i.reload?((0,o.wg)(),(0,o.j4)(r,{key:0,class:"reloader",size:"large"})):((0,o.wg)(),(0,o.iD)("div",Ts,[((0,o.wg)(),(0,o.j4)(l,{key:i.navbarKey})),(0,o._)("div",zs,[(0,o.Wm)(d)])]))}const Rs=e=>((0,o.dD)("data-v-0d0eda68"),e=e(),(0,o.Cn)(),e),Js={class:"navbar navbar_full"},Es={key:0,class:"navbar__sign"},Vs={key:1,class:"navbar__sign"},Ys={class:"navbar-nickname"},Bs={class:"navbar navbar_mob"},Gs=Rs((()=>(0,o._)("span",null,"Posts",-1))),Ks=Rs((()=>(0,o._)("span",null,"Theme",-1))),Qs=Rs((()=>(0,o._)("span",null,"Create post",-1))),Xs={key:0,class:"navbar__sign"},ea=Rs((()=>(0,o._)("span",null,"Sign in",-1))),ta=Rs((()=>(0,o._)("span",null,"Register",-1))),sa={key:1,class:"navbar__sign"},aa={class:"navbar-nickname"},ia=Rs((()=>(0,o._)("span",null,"Logout",-1)));function na(e,t,s,i,n,r){const l=(0,o.up)("a-button"),d=(0,o.up)("HomeFilled"),u=(0,o.up)("a-tooltip"),c=(0,o.up)("BgColorsOutlined"),m=(0,o.up)("FormOutlined"),h=(0,o.up)("LoginOutlined"),g=(0,o.up)("UserAddOutlined"),f=(0,o.up)("UserOutlined"),v=(0,o.up)("LogoutOutlined");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",Js,[(0,o._)("div",null,[e.$store.state.auth.currentUser?((0,o.wg)(),(0,o.j4)(l,{key:0,type:"ghost",onClick:t[0]||(t[0]=t=>e.$router.push({name:"main"}))},{default:(0,o.w5)((()=>[(0,o.Uk)("Posts")])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(l,{type:"text",onClick:r.handleChangeTheme},{default:(0,o.w5)((()=>[(0,o.Uk)("Theme")])),_:1},8,["onClick"]),e.$store.state.auth.currentUser?((0,o.wg)(),(0,o.j4)(l,{key:1,type:"text",onClick:t[1]||(t[1]=t=>e.$router.push({name:"createpost"}))},{default:(0,o.w5)((()=>[(0,o.Uk)("Create post")])),_:1})):(0,o.kq)("",!0)]),e.$store.state.auth.currentUser?((0,o.wg)(),(0,o.iD)("div",Vs,[(0,o._)("div",Ys,[(0,o._)("strong",null,(0,p.zw)(e.$store.state.auth.currentUser.displayName),1),(0,o.Wm)(l,{type:"text",onClick:r.handleLogout},{default:(0,o.w5)((()=>[(0,o.Uk)("Logout")])),_:1},8,["onClick"])])])):((0,o.wg)(),(0,o.iD)("div",Es,[(0,o.Wm)(l,{type:"text",onClick:t[2]||(t[2]=t=>e.$router.push({name:"signin"}))},{default:(0,o.w5)((()=>[(0,o.Uk)("Sign in")])),_:1}),(0,o.Wm)(l,{type:"text",onClick:t[3]||(t[3]=t=>e.$router.push({name:"register"}))},{default:(0,o.w5)((()=>[(0,o.Uk)("Register")])),_:1})]))]),(0,o._)("div",Bs,[(0,o._)("div",null,[(0,o.Wm)(u,{placement:"bottom",overlayClassName:r.hiddenClass},{title:(0,o.w5)((()=>[Gs])),default:(0,o.w5)((()=>[e.$store.state.auth.currentUser?((0,o.wg)(),(0,o.j4)(l,{key:0,class:"navbar-icon",type:"text",onClick:t[4]||(t[4]=t=>e.$router.push({name:"main"}))},{icon:(0,o.w5)((()=>[(0,o.Wm)(d)])),_:1})):(0,o.kq)("",!0)])),_:1},8,["overlayClassName"]),(0,o.Wm)(u,{placement:"bottom",overlayClassName:r.hiddenClass},{title:(0,o.w5)((()=>[Ks])),default:(0,o.w5)((()=>[(0,o.Wm)(l,{class:"navbar-icon",type:"text",onClick:r.handleChangeTheme},{icon:(0,o.w5)((()=>[(0,o.Wm)(c)])),_:1},8,["onClick"])])),_:1},8,["overlayClassName"]),(0,o.Wm)(u,{placement:"bottom",overlayClassName:r.hiddenClass},{title:(0,o.w5)((()=>[Qs])),default:(0,o.w5)((()=>[e.$store.state.auth.currentUser?((0,o.wg)(),(0,o.j4)(l,{key:0,class:"navbar-icon",type:"text",onClick:t[5]||(t[5]=t=>e.$router.push({name:"createpost"}))},{icon:(0,o.w5)((()=>[(0,o.Wm)(m)])),_:1})):(0,o.kq)("",!0)])),_:1},8,["overlayClassName"])]),e.$store.state.auth.currentUser?((0,o.wg)(),(0,o.iD)("div",sa,[(0,o._)("div",aa,[(0,o._)("strong",null,(0,p.zw)(e.$store.state.auth.currentUser.displayName),1),(0,o.Wm)(u,{placement:"bottomRight"},{title:(0,o.w5)((()=>[(0,o._)("span",null,(0,p.zw)(e.$store.state.auth.currentUser.displayName),1)])),default:(0,o.w5)((()=>[(0,o.Wm)(l,{class:"navbar-icon navbar-user",type:"text",onClick:t[8]||(t[8]=(0,a.iM)((()=>{}),["stop"]))},{icon:(0,o.w5)((()=>[(0,o.Wm)(f)])),_:1})])),_:1})]),(0,o.Wm)(u,{placement:"bottom",overlayClassName:r.hiddenClass},{title:(0,o.w5)((()=>[ia])),default:(0,o.w5)((()=>[(0,o.Wm)(l,{class:"navbar-icon",type:"text",onClick:r.handleLogout},{icon:(0,o.w5)((()=>[(0,o.Wm)(v)])),_:1},8,["onClick"])])),_:1},8,["overlayClassName"])])):((0,o.wg)(),(0,o.iD)("div",Xs,[(0,o.Wm)(u,{placement:"bottom",overlayClassName:r.hiddenClass},{title:(0,o.w5)((()=>[ea])),default:(0,o.w5)((()=>[(0,o.Wm)(l,{class:"navbar-icon",type:"text",onClick:t[6]||(t[6]=t=>e.$router.push({name:"signin"}))},{icon:(0,o.w5)((()=>[(0,o.Wm)(h)])),_:1})])),_:1},8,["overlayClassName"]),(0,o.Wm)(u,{placement:"bottom",overlayClassName:r.hiddenClass},{title:(0,o.w5)((()=>[ta])),default:(0,o.w5)((()=>[(0,o.Wm)(l,{class:"navbar-icon",type:"text",onClick:t[7]||(t[7]=t=>e.$router.push({name:"register"}))},{icon:(0,o.w5)((()=>[(0,o.Wm)(g)])),_:1})])),_:1},8,["overlayClassName"])]))])],64)}var oa=s(9965),ra=s(9427),la=s(851),da=s(5101),ua=s(6110),ca=s(7935),pa={components:{HomeFilled:oa.Z,FormOutlined:ra.Z,LoginOutlined:la.Z,LogoutOutlined:da.Z,UserOutlined:ut.Z,UserAddOutlined:ua.Z,BgColorsOutlined:ca.Z},computed:{isMobile(){return Fe()},hiddenClass(){return this.isMobile?"tooltip_hidden":""}},methods:{handleLogout(){ee().then((()=>{delete sessionStorage.user,this.$router.push({name:"signin"})}))},handleChangeTheme(){document.querySelector("body").classList.toggle("dark"),localStorage.theme?delete localStorage.theme:localStorage.theme="dark"}}};const ma=(0,d.Z)(pa,[["render",na],["__scopeId","data-v-0d0eda68"]]);var ha=ma,ga={components:{NavBar:ha},data(){return{reload:!1,navbarKey:0}},methods:{},created(){if(sessionStorage.user){this.reload=!0;const e=125,t=setInterval((()=>{this.$store.state.auth.currentUser&&(this.navbarKey++,this.$router.push(sessionStorage.page),this.reload=!1,clearInterval(t))}),e)}localStorage.theme&&document.querySelector("body").classList.add("dark")}};const fa=(0,d.Z)(ga,[["render",Hs]]);var va=fa;(0,a.ri)(va).use(J).use(As).use(i.ZP).mount("#app")}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,n){if(!a){var o=1/0;for(u=0;u<e.length;u++){a=e[u][0],i=e[u][1],n=e[u][2];for(var r=!0,l=0;l<a.length;l++)(!1&n||o>=n)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(r=!1,n<o&&(o=n));if(r){e.splice(u--,1);var d=i();void 0!==d&&(t=d)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[a,i,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,n,o=a[0],r=a[1],l=a[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(l)var u=l(s)}for(t&&t(a);d<o.length;d++)n=o[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(u)},a=self["webpackChunkblog"]=self["webpackChunkblog"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(4283)}));a=s.O(a)})();
//# sourceMappingURL=app.07921090.js.map