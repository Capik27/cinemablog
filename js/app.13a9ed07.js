(function(){"use strict";var e={4970:function(e,t,s){var a=s(9242),i=s(9704),n=(s(2467),s(2483)),o=s(3396);function r(e,t,s,a,i,n){const r=(0,o.up)("a-button"),l=(0,o.up)("a-result");return(0,o.wg)(),(0,o.j4)(l,{status:"404",title:"404","sub-title":"Sorry, the page you visited does not exist."},{extra:(0,o.w5)((()=>[(0,o.Wm)(r,{type:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("Back Home")])),_:1})])),_:1})}var l={},d=s(89);const u=(0,d.Z)(l,[["render",r],["__scopeId","data-v-6fa129b0"]]);var c=u,p=s(7139);const m={key:0,class:"posts-list"},h={class:"card_post"},g={class:"post_preview"},f=["src","alt"],v={class:"post_desc"},w={class:"post_author"},k={key:2};function _(e,t,s,i,n,r){const l=(0,o.up)("SearchForm"),d=(0,o.up)("PersonalLike"),u=(0,o.up)("PostListCardControls"),c=(0,o.up)("a-card"),_=(0,o.up)("a-pagination"),y=(0,o.up)("a-spin");return(0,o.wg)(),(0,o.iD)(o.HY,null,[n.posts&&n.posts.length&&n.likes&&e.$store.state.auth.currentUser?((0,o.wg)(),(0,o.iD)("div",m,[(0,o.Wm)(l,{executor:r.searchHandler,class:"input_gr"},null,8,["executor"]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.pagList,(s=>((0,o.wg)(),(0,o.j4)(c,{class:"card",hoverable:"",size:"small",key:s.id,"data-id":s.id,onClick:(0,a.iM)(r.cardClick,["prevent"])},{default:(0,o.w5)((()=>[(0,o._)("div",h,[(0,o._)("div",g,[(0,o._)("img",{src:s.previewURL,alt:s.previewName},null,8,f)]),(0,o._)("div",v,[(0,o._)("h3",null,(0,p.zw)(s.title),1),(0,o._)("span",w,"by "+(0,p.zw)(s.author),1)])]),(0,o._)("div",{class:(0,p.C_)(["card_options",[{card_options_show:r.isMobile}]]),onClick:t[0]||(t[0]=(0,a.iM)((()=>{}),["stop"]))},[(0,o.Wm)(d,{parentUpd:r.updLike,postId:s.id,valueId:n.likes?.[s.id]?.[e.$store.state.auth.currentUser.uid]?.uid?n.likes[s.id][e.$store.state.auth.currentUser.uid].uid:""},null,8,["parentUpd","postId","valueId"]),(0,o.Wm)(u,{deleteCard:r.deleteCard,post:s},null,8,["deleteCard","post"])],2)])),_:2},1032,["data-id","onClick"])))),128))])):(0,o.kq)("",!0),n.posts&&n.filtered.length>n.itemLimit?((0,o.wg)(),(0,o.j4)(_,{key:1,total:n.filtered.length,current:n.currentPage,"onUpdate:current":t[1]||(t[1]=e=>n.currentPage=e),pageSize:n.itemLimit,"onUpdate:pageSize":t[2]||(t[2]=e=>n.itemLimit=e)},null,8,["total","current","pageSize"])):(0,o.kq)("",!0),n.posts&&!n.posts.length?((0,o.wg)(),(0,o.iD)("h1",k,"No posts yet")):(0,o.kq)("",!0),n.posts?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(y,{key:3,class:"loading",size:"large"}))],64)}s(7658);const y=e=>((0,o.dD)("data-v-3a1f7aed"),e=e(),(0,o.Cn)(),e),b={key:0,class:"card_controls"},C=y((()=>(0,o._)("span",null,"Edit",-1))),L=y((()=>(0,o._)("span",null,"Delete",-1))),F={class:"card_controls-link"};function U(e,t,s,a,i,n){const r=(0,o.up)("edit-outlined"),l=(0,o.up)("a-tooltip"),d=(0,o.up)("delete-outlined"),u=(0,o.up)("a-popconfirm");return e.$store.state.auth.currentUser&&e.$store.state.auth.currentUser.uid===s.post.uid?((0,o.wg)(),(0,o.iD)("div",b,[(0,o.Wm)(l,{placement:"top"},{title:(0,o.w5)((()=>[C])),default:(0,o.w5)((()=>[(0,o._)("a",{class:"card_controls-link",onClick:t[0]||(t[0]=(...e)=>n.handleEdit&&n.handleEdit(...e))},[(0,o.Wm)(r)])])),_:1}),(0,o.Wm)(u,{title:"Are you sure?","ok-text":"Yes","cancel-text":"No",onConfirm:n.handleConfirm,onCancel:n.handleCancel},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{placement:"bottom",overlayClassName:n.hiddenClass},{title:(0,o.w5)((()=>[L])),default:(0,o.w5)((()=>[(0,o._)("a",F,[(0,o.Wm)(d)])])),_:1},8,["overlayClassName"])])),_:1},8,["onConfirm","onCancel"])])):(0,o.kq)("",!0)}var W=s(3318),D=s(681),P=s(252);function $(){return(new Date).toISOString()}function S(e,t){const s=e.createdAt.toDate().getTime(),a=t.createdAt.toDate().getTime();return s-a}var I=s(65),Z=s(7795),x=s(9862),N=s(4287),O=s(1294);const q={apiKey:"AIzaSyDs2dm6pyah7VuaJ8_yJQ3pkW6XLY5WAOU",authDomain:"blog-85d3d.firebaseapp.com",projectId:"blog-85d3d",storageBucket:"blog-85d3d.appspot.com",messagingSenderId:"649337547146",appId:"1:649337547146:web:a0cbb15dc4256542be4073",measurementId:"G-S3NR9DDCV8"},j=(0,Z.ZF)(q),M=(0,x.v0)(),T=(0,N.ad)(),z=(0,O.cF)(j),H={page:1},R={posts:null};var A=(0,I.MT)({state:{auth:M,firestore:T,storage:z,pagination:H,data:R},getters:{},mutations:{setPage(e,t){e.pagination.page=t},setPosts(e,t){e.data.posts=t}},actions:{updatePageNumber({commit:e},t){e("setPage",t)},updatePosts({commit:e},t){e("setPosts",t)}}});const J="posts",E="comments",V="likes",G={"auth/user-not-found":"User not found","auth/invalid-email":"Invalid email","auth/wrong-password":"Wrong password","auth/email-already-in-use":"Email already in use","auth/too-many-requests":"Too many login attempts, please try again later"},{storage:Y,firestore:B,auth:K}=A.state;async function Q(e=K){return(0,x.w7)(e)}async function X(){const e=new x.hJ,t=await(0,x.rh)(K,e);return x.hJ.credentialFromResult(t),t}function ee(e,t){return(0,x.e5)(K,e,t)}async function te(e,t,s){const a=(0,x.v0)();return await(0,x.Xb)(a,t,s),await(0,x.ck)(a.currentUser,{displayName:e}),(0,x.w7)(a),ee(t,s)}async function se(e,t,s,a){let i=e.previewURL;"string"!=typeof a&&(await ge(`${e.id}/${e.previewName}`),i=await oe(a,e.id));const n={...e,title:t,body:s,previewURL:i,previewName:a.name||e.previewName,changedAt:(0,N.Bt)()},o=(0,N.JU)((0,N.hJ)(B,J),e.id);return await(0,N.pl)(o,n,{merge:!0})}async function ae(e,t,s,a,i){const n=$(),o=await oe(i,n),r={id:n,uid:e,author:t,title:s,body:a,previewURL:o,previewName:i.name,createdAt:(0,N.Bt)()},l=(0,N.JU)((0,N.hJ)(B,J),n);return await(0,N.pl)(l,r,{merge:!0})}async function ie(e,t,s,a){const i=$(),n={id:i,uid:t,name:s,value:a,createdAt:(0,N.Bt)()},o={[i]:n},r=(0,N.JU)((0,N.hJ)(B,E),e);return(0,N.pl)(r,o,{merge:!0})}async function ne(e,t){const s=$(),a={id:s,uid:t,createdAt:(0,N.Bt)()},i={[t]:a},n=(0,N.JU)((0,N.hJ)(B,V),e);return(0,N.pl)(n,i,{merge:!0})}async function oe(e,t){const s=`${t}/${e.name}`,a=(0,O.iH)(Y,s);return await(0,O.KV)(a,e),await(0,O.Jt)(a)}async function re(e){const t=(0,N.hJ)(B,e),s=await(0,N.PL)(t),a=[];return s.empty||s.forEach((async e=>{const t=e.data();a.push(t)})),a}async function le(e){const t=(0,N.hJ)(B,e),s=await(0,N.PL)(t),a={};return s.empty||s.forEach((async e=>{const t=e.data();a[e.id]=t})),a}async function de(e,t){const s=(0,N.JU)(B,t,e),a=await(0,N.QT)(s);return a.exists()?a.data():[]}async function ue(e){const t=await de(e,E),s=[];for(const a in t)s.push(t[a]);return s.sort(S),s}function ce(){return le(V)}async function pe(e){const t=await de(e,V),s={};for(const a in t)s[a]=t[a];return s}function me(){return re(J)}function he(e){return de(e,J)}async function ge(e){const t=(0,O.iH)(Y,e);await(0,O.oq)(t)}async function fe(e,t){await ge(`${e}/${t}`),await(0,N.oe)((0,N.JU)(B,J,e)),await(0,N.oe)((0,N.JU)(B,E,e)),await(0,N.oe)((0,N.JU)(B,V,e))}async function ve(e,t){const s=(0,N.JU)(B,E,t),a={[e]:(0,N.AK)()};return(0,N.pl)(s,a,{merge:!0})}async function we(e,t){const s=(0,N.JU)(B,V,t),a={[e]:(0,N.AK)()};return(0,N.pl)(s,a,{merge:!0})}function ke(){return/Mobile/.test(navigator.userAgent)}var _e={components:{EditOutlined:W.Z,DeleteOutlined:D.Z},props:{post:{type:Object,required:!0},deleteCard:{type:Function,required:!0}},computed:{isMobile(){return ke()},hiddenClass(){return this.isMobile?"tooltip_hidden":""}},methods:{handleEdit(){const e=this.post.id;this.$router.push({name:"editpost",params:{id:e}})},handleDelete(){const e=this.post.previewName,t=this.post.id,s=document.querySelector(`[data-id="${t}"]`);s.classList.add("card_deleting_animation"),fe(t,e).then((()=>{P.ZP.success(`Post "${this.post.title}" deleted`),this.$router.push({name:"main"})})).catch((e=>{P.ZP.error("Error: "+e.code)})),setTimeout((()=>{this.deleteCard(t)}),330)},handleConfirm(){this.handleDelete()},handleCancel(){}}};const ye=(0,d.Z)(_e,[["render",U],["__scopeId","data-v-3a1f7aed"]]);var be=ye;const Ce=e=>((0,o.dD)("data-v-d686dcd8"),e=e(),(0,o.Cn)(),e),Le={class:"card_like"},Fe=Ce((()=>(0,o._)("span",null,"Liked",-1))),Ue=Ce((()=>(0,o._)("span",null,"Not liked",-1)));function We(e,t,s,a,i,n){const r=(0,o.up)("HeartFilled"),l=(0,o.up)("a-tooltip"),d=(0,o.up)("HeartOutlined");return(0,o.wg)(),(0,o.iD)("div",Le,[(0,o._)("a",{onClick:t[0]||(t[0]=(...e)=>n.toggleLike&&n.toggleLike(...e)),class:(0,p.C_)(i.likeId?"card_like-btn__liked":"card_like-btn__notliked")},[i.likeId?((0,o.wg)(),(0,o.j4)(l,{key:0,placement:"top",overlayClassName:n.hiddenClass},{title:(0,o.w5)((()=>[Fe])),default:(0,o.w5)((()=>[(0,o.Wm)(r)])),_:1},8,["overlayClassName"])):((0,o.wg)(),(0,o.j4)(l,{key:1,placement:"top",overlayClassName:n.hiddenClass},{title:(0,o.w5)((()=>[Ue])),default:(0,o.w5)((()=>[(0,o.Wm)(d)])),_:1},8,["overlayClassName"]))],2)])}var De=s(8919),Pe=s(3300),$e={components:{HeartFilled:De.Z,HeartOutlined:Pe.Z},props:{parentUpd:{type:Function},postId:{type:String,required:!0},valueId:{type:String}},data(){return{likeId:null}},computed:{isMobile(){return ke()},hiddenClass(){return this.isMobile?"tooltip_hidden":""}},methods:{async updateLikeId(e){const t=await pe(this.postId);this.likeId=this.findLike(e,t)},findLike(e,t){return t[e]?.uid},toggleLike(){if(this.likeId)we(this.likeId,this.postId),this.likeId=null;else{const e=this.$store.state.auth.currentUser.uid;ne(this.postId,e).then((()=>{this.updateLikeId(e)}))}this.parentUpd&&this.parentUpd(this.postId)}},created(){this.valueId?this.likeId=this.valueId:this.updateLikeId(this.$store.state.auth.currentUser.uid)}};const Se=(0,d.Z)($e,[["render",We],["__scopeId","data-v-d686dcd8"]]);var Ie=Se;const Ze=e=>((0,o.dD)("data-v-6dc485da"),e=e(),(0,o.Cn)(),e),xe=Ze((()=>(0,o._)("span",null,"Like filter On",-1))),Ne=Ze((()=>(0,o._)("span",null,"Like filter Off",-1))),Oe={class:"search-group-box_selects"},qe=Ze((()=>(0,o._)("span",null,"Time filter",-1)));function je(e,t,s,a,i,n){const r=(0,o.up)("HeartFilled"),l=(0,o.up)("a-tooltip"),d=(0,o.up)("HeartOutlined"),u=(0,o.up)("a-input"),c=(0,o.up)("a-select-option"),p=(0,o.up)("a-select"),m=(0,o.up)("a-input-group");return(0,o.wg)(),(0,o.j4)(m,{compact:"",class:"search-group-box"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{"allow-clear":"",value:i.searchVal,"onUpdate:value":t[0]||(t[0]=e=>i.searchVal=e),placeholder:`${i.selectType} search`},{suffix:(0,o.w5)((()=>[i.likedFilter?((0,o.wg)(),(0,o.j4)(l,{key:0,placement:"top"},{title:(0,o.w5)((()=>[xe])),default:(0,o.w5)((()=>[(0,o.Wm)(r,{onClick:n.toggleLike,class:"search-group-box_liked"},null,8,["onClick"])])),_:1})):((0,o.wg)(),(0,o.j4)(l,{key:1,placement:"top"},{title:(0,o.w5)((()=>[Ne])),default:(0,o.w5)((()=>[(0,o.Wm)(d,{onClick:n.toggleLike,class:"search-group-box_notliked"},null,8,["onClick"])])),_:1}))])),_:1},8,["value","placeholder"]),(0,o._)("div",Oe,[(0,o.Wm)(p,{value:i.selectType,"onUpdate:value":t[1]||(t[1]=e=>i.selectType=e),class:"search-group-box_select"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{value:"title"},{default:(0,o.w5)((()=>[(0,o.Uk)("title")])),_:1}),(0,o.Wm)(c,{value:"author"},{default:(0,o.w5)((()=>[(0,o.Uk)("author")])),_:1})])),_:1},8,["value"]),(0,o.Wm)(l,{placement:"top",overlayClassName:n.hiddenClass},{title:(0,o.w5)((()=>[qe])),default:(0,o.w5)((()=>[(0,o.Wm)(p,{value:i.timeFilter,"onUpdate:value":t[2]||(t[2]=e=>i.timeFilter=e),class:"search-group-box_select-time"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{value:"all"},{default:(0,o.w5)((()=>[(0,o.Uk)("all time")])),_:1}),(0,o.Wm)(c,{value:"year"},{default:(0,o.w5)((()=>[(0,o.Uk)("year")])),_:1}),(0,o.Wm)(c,{value:"month"},{default:(0,o.w5)((()=>[(0,o.Uk)("month")])),_:1}),(0,o.Wm)(c,{value:"week"},{default:(0,o.w5)((()=>[(0,o.Uk)("week")])),_:1}),(0,o.Wm)(c,{value:"day"},{default:(0,o.w5)((()=>[(0,o.Uk)("day")])),_:1}),(0,o.Wm)(c,{value:"hour"},{default:(0,o.w5)((()=>[(0,o.Uk)("hour")])),_:1})])),_:1},8,["value"])])),_:1},8,["overlayClassName"])])])),_:1})}var Me={components:{HeartFilled:De.Z,HeartOutlined:Pe.Z},props:{executor:{type:Function,required:!0}},data(){return{searchVal:"",selectType:"title",timeFilter:"all",likedFilter:!1}},computed:{isMobile(){return ke()||window.innerWidth<=400},hiddenClass(){return this.isMobile?"tooltip_hidden":""}},methods:{toggleLike(){this.likedFilter=!this.likedFilter}},watch:{searchVal(e){sessionStorage.searchVal=e,this.executor(e,this.selectType,this.timeFilter,this.likedFilter)},selectType(e){sessionStorage.selectType=e,this.executor(this.searchVal,e,this.timeFilter,this.likedFilter)},timeFilter(e){sessionStorage.timeFilter=e,this.executor(this.searchVal,this.selectType,e,this.likedFilter)},likedFilter(e){e?sessionStorage.likedFilter=e:delete sessionStorage.likedFilter,this.executor(this.searchVal,this.selectType,this.timeFilter,e)}},created(){sessionStorage.searchVal&&(this.searchVal=sessionStorage.searchVal),sessionStorage.selectType&&(this.selectType=sessionStorage.selectType),sessionStorage.timeFilter&&(this.timeFilter=sessionStorage.timeFilter),sessionStorage.likedFilter&&(this.likedFilter=!0)}};const Te=(0,d.Z)(Me,[["render",je],["__scopeId","data-v-6dc485da"]]);var ze=Te;function He(e,t){const s=new Date,a=new Date;switch(t){case"all":return!0;case"year":a.setMonth(a.getMonth()-12);break;case"month":a.setMonth(s.getMonth()-1);break;case"week":a.setDate(s.getDate()-7);break;case"day":a.setDate(s.getDate()-1);break;case"hour":a.setTime(a.getTime()-36e5);break;default:return!1}return!(e>s||e<a)}const Re=1920,Ae=160,Je=91,Ee=48,Ve=255,Ge=88,Ye=10;function Be(){const e=Math.min(window.innerWidth,Re)-Ee,t=window.innerHeight-Ye-Ae-Je,s=Math.floor(t/(Ge+Ye)),a=Math.floor(e/Ve),i=a*Ve+(a-1)*Ye,n=(i<=e?a:a-1)||1,o=s*n;return o}var Ke={components:{PersonalLike:Ie,PostListCardControls:be,SearchForm:ze},data(){return{posts:this.$store.state.data.posts,filtered:[],timefiltered:[],timeFilter:"all",likes:null,likedFilter:!1,currentPage:this.$store.state.pagination.page,itemLimit:50,pagList:null}},computed:{isMobile(){return ke()}},methods:{setFilteredPosts(e){this.filtered=e},cardClick(e){if("card_delete"===e.target.class)return;const t=e.target.closest(".card"),s=t.dataset.id;this.$router.push({name:J,params:{id:s}})},updLike(e){const t=this.$store.state.auth.currentUser.uid;this.likes[e]?.[t]?(this.likedFilter&&(this.filtered=this.filtered.filter((t=>e!==t.id))),delete this.likes[e]?.[t]):this.likes[e]?this.likes[e][t]={uid:t}:this.likes[e]={[t]:{uid:t}},this.pagListUpd()},searchHandler(e,t,s,a){let i;s!==this.timeFilter&&(i=this.posts.filter((e=>He(e.createdAt.toDate(),s))),this.timeFilter=s,this.timefiltered=i);let n=[];if(this.likedFilter=a,a)for(let o of this.timefiltered)this.likes[o.id]?.[this.$store.state.auth.currentUser.uid]&&n.push(o);else n=this.timefiltered;i=n.filter((s=>s?.[t].toLowerCase().includes(e.toLowerCase()))),this.setFilteredPosts(i),this.pagListUpd()},deleteCard(e){this.setFilteredPosts(this.filtered.filter((t=>t.id!==e))),this.timefiltered=this.timefiltered.filter((t=>t.id!==e)),this.posts=this.posts.filter((t=>t.id!==e)),this.pagListUpd()},pagListUpd(){if(this.filtered.length<=this.itemLimit)this.currentPage=1;else{const e=Math.ceil(this.filtered.length/this.itemLimit);this.currentPage>e&&(this.currentPage=e)}this.pagList=this.filtered.filter(((e,t)=>t+1<=this.itemLimit*this.currentPage&&t+1>this.itemLimit*this.currentPage-this.itemLimit))},updCardsNumber(){this.isMobile||(this.itemLimit=Be())},resizeUpd(){this.updCardsNumber(),this.pagListUpd()}},watch:{currentPage(e){this.$store.dispatch("updatePageNumber",e),this.pagListUpd()}},created(){const e=me(),t=ce();Promise.all([e,t]).then((e=>{const[t,s]=e;this.setFilteredPosts(t),this.timefiltered=t,this.posts=t,this.$store.dispatch("updatePosts",this.posts),this.pagListUpd(),this.likes=s})).catch((()=>{}))},beforeMount(){this.updCardsNumber()},mounted(){window.addEventListener("resize",this.resizeUpd)},beforeUnmount(){window.removeEventListener("resize",this.resizeUpd)}};const Qe=(0,d.Z)(Ke,[["render",_],["__scopeId","data-v-10ab959e"]]);var Xe=Qe;const et={class:"form_container"},tt={class:"form_controls-container"};function st(e,t,s,a,i,n){const r=(0,o.up)("UserOutlined"),l=(0,o.up)("a-input"),d=(0,o.up)("a-form-item"),u=(0,o.up)("MailOutlined"),c=(0,o.up)("LockOutlined"),p=(0,o.up)("a-input-password"),m=(0,o.up)("a-button"),h=(0,o.up)("a-form");return(0,o.wg)(),(0,o.iD)("div",et,[(0,o.Wm)(h,{class:"form",ref:"formRef",name:"custom-validation",model:e.formState,rules:e.rules,onFinish:e.handleFinish,onValidate:e.handleValidate,onFinishFailed:e.handleFinishFailed},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{"has-feedback":"",name:"name"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{value:e.formState.name,"onUpdate:value":t[0]||(t[0]=t=>e.formState.name=t),placeholder:"Username",autocomplete:"off",disabled:e.isLoading},{prefix:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"form_icon"})])),_:1},8,["value","disabled"])])),_:1}),(0,o.Wm)(d,{"has-feedback":"",name:"email"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{value:e.formState.email,"onUpdate:value":t[1]||(t[1]=t=>e.formState.email=t),placeholder:"Email",autocomplete:"off",disabled:e.isLoading},{prefix:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"form_icon"})])),_:1},8,["value","disabled"])])),_:1}),(0,o.Wm)(d,{"has-feedback":"",name:"pass"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{value:e.formState.pass,"onUpdate:value":t[2]||(t[2]=t=>e.formState.pass=t),type:"password",placeholder:"Password",autocomplete:"off",disabled:e.isLoading},{prefix:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"form_icon"})])),_:1},8,["value","disabled"])])),_:1}),(0,o.Wm)(d,{"has-feedback":"",name:"checkPass"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{value:e.formState.checkPass,"onUpdate:value":t[3]||(t[3]=t=>e.formState.checkPass=t),placeholder:"Confirm password",type:"password",autocomplete:"off",disabled:e.isLoading},{prefix:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"form_icon"})])),_:1},8,["value","disabled"])])),_:1}),(0,o.Wm)(d,{class:"form_controls"},{default:(0,o.w5)((()=>[(0,o._)("div",tt,[(0,o.Wm)(m,{loading:e.isLoading,disabled:""===e.formState.name||""===e.formState.email||""===e.formState.pass||""===e.formState.checkPass,type:"primary","html-type":"submit"},{default:(0,o.w5)((()=>[(0,o.Uk)("Submit")])),_:1},8,["loading","disabled"]),(0,o.Wm)(m,{loading:e.isLoading,onClick:e.resetForm},{default:(0,o.w5)((()=>[(0,o.Uk)("Reset")])),_:1},8,["loading","onClick"])])])),_:1})])),_:1},8,["model","rules","onFinish","onValidate","onFinishFailed"])])}var at=s(8896),it=s(2329),nt=s(8795);const ot=/^[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+.[a-zA-Z]{2,}$/;var rt=s(4870),lt=(0,o.aZ)({components:{UserOutlined:at.Z,MailOutlined:it.Z,LockOutlined:nt.Z},setup(){const e=(0,n.tv)(),t=(0,rt.iH)(),s=(0,rt.iH)(!1),a=(0,rt.qj)({name:"",email:"",pass:"",checkPass:""}),i=async(e,t)=>t?Promise.resolve():Promise.reject("Name is required"),o=async(e,t)=>t.match(ot)?Promise.resolve():Promise.reject("Not valid email"),r=async(e,s)=>""===s?Promise.reject("Please input the password"):s.length>=6?(""!==a.checkPass&&t.value.validateFields("checkPass"),Promise.resolve()):Promise.reject("Password from 6 characters"),l=async(e,t)=>""===t?Promise.reject("Please input the password again"):t!==a.pass?Promise.reject("Two inputs don't match!"):Promise.resolve(),d={name:[{required:!0,validator:i,trigger:"change"}],email:[{required:!0,validator:o,trigger:"change"}],pass:[{required:!0,validator:r,trigger:"change"}],checkPass:[{required:!0,validator:l,trigger:"change"}]},u=()=>{t.value.resetFields()},c=({name:t,email:a,pass:i})=>{s.value=!0,te(t,a,i).then((()=>{e.push({name:"main"})})).catch((e=>{P.ZP.error(G[e.code])})).finally((()=>{u(),s.value=!1}))},p=e=>{console.log(e)},m=()=>{};return{formState:a,formRef:t,rules:d,isLoading:s,handleFinishFailed:p,handleFinish:c,resetForm:u,handleValidate:m}}});const dt=(0,d.Z)(lt,[["render",st],["__scopeId","data-v-1fe38c3b"]]);var ut=dt;const ct=e=>((0,o.dD)("data-v-d649b946"),e=e(),(0,o.Cn)(),e),pt={class:"sign_container"},mt=ct((()=>(0,o._)("div",{class:"line"},null,-1)));function ht(e,t,s,a,i,n){const r=(0,o.up)("GoogleOutlined"),l=(0,o.up)("a-button"),d=(0,o.up)("MailOutlined"),u=(0,o.up)("a-input"),c=(0,o.up)("a-form-item"),p=(0,o.up)("LockOutlined"),m=(0,o.up)("a-input-password"),h=(0,o.up)("a-form");return(0,o.wg)(),(0,o.iD)("div",pt,[(0,o.Wm)(l,{onClick:e.handleLoginGoogle,loading:e.isGooLoading,disabled:e.isGooLoading||e.isDefLoading,class:"sign_google"},{icon:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"sign_google-icon"})])),_:1},8,["onClick","loading","disabled"]),mt,(0,o.Wm)(h,{class:"form",model:e.formState,onFinish:e.handleFinish,onFinishFailed:e.handleFinishFailed},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{value:e.formState.email,"onUpdate:value":t[0]||(t[0]=t=>e.formState.email=t),placeholder:"Email",disabled:e.isGooLoading||e.isDefLoading},{prefix:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"sign_icon"})])),_:1},8,["value","disabled"])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,{value:e.formState.pass,"onUpdate:value":t[1]||(t[1]=t=>e.formState.pass=t),type:"password",placeholder:"Password",disabled:e.isGooLoading||e.isDefLoading},{prefix:(0,o.w5)((()=>[(0,o.Wm)(p,{class:"sign_icon"})])),_:1},8,["value","disabled"])])),_:1}),(0,o.Wm)(c,{class:"sign_default"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{class:"sign_default-btn",type:"primary","html-type":"submit",loading:e.isDefLoading,disabled:""===e.formState.user||""===e.formState.pass||e.isGooLoading||e.isDefLoading},{default:(0,o.w5)((()=>[(0,o.Uk)(" Log in ")])),_:1},8,["loading","disabled"])])),_:1})])),_:1},8,["model","onFinish","onFinishFailed"])])}var gt=s(7866),ft=(0,o.aZ)({components:{MailOutlined:it.Z,LockOutlined:nt.Z,GoogleOutlined:gt.Z},setup(){const e=(0,n.tv)(),t=(0,rt.iH)(!1),s=(0,rt.iH)(!1),a=(0,rt.qj)({email:"",pass:""}),i=()=>{s.value=!0,ee(a.email,a.pass).then((t=>{sessionStorage.user=t.user.uid,e.push({name:"main"})})).catch((e=>{P.ZP.error(G[e.code])})).finally((()=>{setTimeout((()=>{s.value=!1}),1e3)}))},o=e=>{console.log(e)},r=()=>{t.value=!0,X().then((t=>{sessionStorage.user=t.user.uid,e.push({name:"main"})})).catch((e=>{P.ZP.error(G[e.code])})).finally((()=>{setTimeout((()=>{t.value=!1}),1e3)}))};return{isGooLoading:t,isDefLoading:s,formState:a,handleFinish:i,handleFinishFailed:o,handleLoginGoogle:r}}});const vt=(0,d.Z)(ft,[["render",ht],["__scopeId","data-v-d649b946"]]);var wt=vt;const kt={key:0,class:"post_container"},_t={class:"post"},yt={class:"post_preview"},bt=["src","alt"],Ct={class:"post_col"},Lt={class:"post_title"},Ft={class:"post_author-container"},Ut={class:"post_author"},Wt={class:"post_date"},Dt={class:"post_body"},Pt={key:0,class:"post_upd"},$t={class:"post_row"},St={class:"post_likes"},It={key:0},Zt={key:0,class:"post_controls"};function xt(e,t,s,a,i,n){const r=(0,o.up)("HeartFilled"),l=(0,o.up)("a-button"),d=(0,o.up)("a-popconfirm"),u=(0,o.up)("ComList"),c=(0,o.up)("a-spin");return(0,o.wg)(),(0,o.iD)(o.HY,null,[i.post?((0,o.wg)(),(0,o.iD)("div",kt,[(0,o._)("div",_t,[(0,o._)("div",yt,[(0,o._)("img",{src:i.post.previewURL,alt:i.post.previewName},null,8,bt)]),(0,o._)("div",Ct,[(0,o._)("h2",Lt,(0,p.zw)(i.post.title),1),(0,o._)("span",Ft,[(0,o._)("span",Ut," by "+(0,p.zw)(i.post.author),1),(0,o._)("span",Wt,(0,p.zw)(n.getMessageDate(i.post.createdAt)),1)]),(0,o._)("p",Dt,(0,p.zw)(i.post.body),1),i.post.changedAt?((0,o.wg)(),(0,o.iD)("p",Pt," upd. "+(0,p.zw)(n.getMessageDate(i.post.changedAt)),1)):(0,o.kq)("",!0)])]),(0,o._)("div",$t,[(0,o._)("div",St,[(0,o.Wm)(l,{type:"text",class:(0,p.C_)(i.likeIdPressed?"post_likes-pressed":"post_likes-icon"),onClick:n.handleToggleLike},{icon:(0,o.w5)((()=>[(0,o.Wm)(r)])),_:1},8,["class","onClick"]),i.likes?((0,o.wg)(),(0,o.iD)("strong",It,(0,p.zw)(Object.keys(i.likes).length),1)):(0,o.kq)("",!0)]),e.$store.state.auth.currentUser&&e.$store.state.auth.currentUser.uid===i.post.uid?((0,o.wg)(),(0,o.iD)("div",Zt,[(0,o.Wm)(l,{disabled:i.isLoading,onClick:n.handleEdit},{default:(0,o.w5)((()=>[(0,o.Uk)("Edit")])),_:1},8,["disabled","onClick"]),(0,o.Wm)(d,{title:"Are you sure?","ok-text":"Yes","cancel-text":"No",onConfirm:n.handleDelete},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{loading:i.isLoading},{default:(0,o.w5)((()=>[(0,o.Uk)("Delete")])),_:1},8,["loading"])])),_:1},8,["onConfirm"])])):(0,o.kq)("",!0)]),i.isLoading?((0,o.wg)(),(0,o.j4)(c,{key:1,size:"large",class:"loading-comments"})):((0,o.wg)(),(0,o.j4)(u,{key:0,id:i.post.id},null,8,["id"]))])):(0,o.kq)("",!0),i.post?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(c,{key:1,size:"large",class:"loading"}))],64)}const Nt=e=>((0,o.dD)("data-v-6b8367b8"),e=e(),(0,o.Cn)(),e),Ot={key:0,class:"post_comments"},qt=["data-comment-id"],jt={class:"comment_author"},Mt={class:"comment_date"},Tt={class:"comment_body"},zt=Nt((()=>(0,o._)("span",null,"Delete",-1))),Ht=["data-id","data-postid"],Rt={key:1,class:"comment_delete"},At={key:1};function Jt(e,t,s,i,n,r){const l=(0,o.up)("a-tooltip"),d=(0,o.up)("a-spin"),u=(0,o.up)("ComForm");return(0,o.wg)(),(0,o.iD)(o.HY,null,[n.comments?((0,o.wg)(),(0,o.iD)("div",Ot,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.comments,(i=>((0,o.wg)(),(0,o.iD)("div",{class:"comment",key:i.id,"data-comment-id":i.id},[(0,o._)("div",null,[(0,o._)("span",jt,(0,p.zw)(i.name),1),(0,o._)("div",Mt,[(0,o._)("span",null,(0,p.zw)(r.getMessageDate(i.createdAt)),1)])]),(0,o._)("span",Tt,(0,p.zw)(i.value),1),n.isDeleting?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(l,{key:0,placement:"left"},{title:(0,o.w5)((()=>[zt])),default:(0,o.w5)((()=>[e.$store.state.auth.currentUser&&i.uid===e.$store.state.auth.currentUser.uid?((0,o.wg)(),(0,o.iD)("div",{key:0,"data-id":i.id,"data-postid":s.id,class:"comment_delete",onClick:t[0]||(t[0]=(0,a.iM)(((...e)=>r.handleDelete&&r.handleDelete(...e)),["stop"]))}," ✖ ",8,Ht)):(0,o.kq)("",!0)])),_:2},1024)),n.isDeleting&&e.$store.state.auth.currentUser&&i.uid===e.$store.state.auth.currentUser.uid?((0,o.wg)(),(0,o.iD)("div",Rt," ✖ ")):(0,o.kq)("",!0)],8,qt)))),128))])):(0,o.kq)("",!0),n.comments&&!n.comments.length?((0,o.wg)(),(0,o.iD)("h2",At,"No comments yet")):(0,o.kq)("",!0),n.comments?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(d,{key:2,class:"loading"})),n.comments?((0,o.wg)(),(0,o.j4)(u,{key:3,upd:r.update,id:s.id},null,8,["upd","id"])):(0,o.kq)("",!0)],64)}const Et={class:"comment_form"};function Vt(e,t,s,a,i,n){const r=(0,o.up)("a-input"),l=(0,o.up)("a-button");return(0,o.wg)(),(0,o.iD)("form",Et,[(0,o.Wm)(r,{value:e.value,"onUpdate:value":t[0]||(t[0]=t=>e.value=t),"auto-size":{minRows:1,maxRows:5},placeholder:"your comment",disabled:e.isLoading,ref:"inputRef"},null,8,["value","disabled"]),(0,o.Wm)(l,{class:"comment_btn","html-type":"submit",onClick:e.submit,loading:e.isLoading,disabled:!e.value},{default:(0,o.w5)((()=>[(0,o.Uk)("Submit")])),_:1},8,["onClick","loading","disabled"])])}var Gt=(0,o.aZ)({props:{id:{type:String,required:!0},upd:{type:Function,required:!0}},setup(){const e=(0,rt.iH)(""),t=(0,rt.iH)(!1),s=(0,rt.iH)();return{value:e,isLoading:t,inputRef:s}},methods:{focusInput(){this.inputRef.focus()},submit(e){if(e.preventDefault(),!this.value)return;const t=this.$store.state.auth.currentUser.uid,s=this.$store.state.auth.currentUser.displayName;this.isLoading=!0,ie(this.id,t,s,this.value).then((async()=>{this.isLoading=!1,this.value="",await this.upd(),this.focusInput()}))}},mounted(){this.focusInput()}});const Yt=(0,d.Z)(Gt,[["render",Vt],["__scopeId","data-v-9def566a"]]);var Bt=Yt;function Kt(e){const t=e.toDate(),s=t.getDate(),a=Qt[t.getMonth()],i=t.getHours();let n=t.getMinutes();const o=n>9?n:`0${n}`;return`(${a} ${s}) at ${i}:${o}`}const Qt=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];var Xt={components:{ComForm:Bt},props:{id:{type:String,required:!0}},data(){return{comments:null,isDeleting:!1}},methods:{setComments(e){this.comments=e},getMessageDate(e){return Kt(e)},handleDelete(e){this.isDeleting=!0;const t=e.target.dataset.id,s=e.target.dataset.postid,a=document.querySelector(`[data-comment-id="${t}"]`);a.classList.add("comment_deleting_animation"),setTimeout((()=>{this.isDeleting=!1,ve(t,s),this.setComments(this.comments.filter((e=>e.id!==t)))}),330)},update(){ue(this.id).then((e=>{this.setComments(e)}))}},created(){this.update()}};const es=(0,d.Z)(Xt,[["render",Jt],["__scopeId","data-v-6b8367b8"]]);var ts=es,ss={components:{ComList:ts,HeartFilled:De.Z},data(){return{post:null,likes:null,likeIdPressed:!1,isLoading:!1}},methods:{setPost(e){this.post=e},getMessageDate(e){return Kt(e)},checkLikePressed(e){return this.likes[e]?.uid},handleToggleLike(){if(this.likeIdPressed)we(this.likeIdPressed,this.post.id).then((()=>{this.updateLikes()}));else{const e=this.$store.state.auth.currentUser.uid;ne(this.post.id,e).then((()=>{this.updateLikes()}))}},handleEdit(){const e=this.post.id;this.$router.push({name:"editpost",params:{id:e}})},handleDelete(){this.isLoading=!0;const e=this.post.id,t=this.post.previewName;fe(e,t).then((()=>{this.isLoading=!1,this.$router.push({name:"main"})}))},async updateLikes(){this.likes=await pe(this.post.id),this.likeIdPressed=this.checkLikePressed(this.$store.state.auth.currentUser.uid)},update(){const e=this.$route.params.id;he(e).then((e=>{this.setPost(e),this.updateLikes()}))}},created(){this.update()}};const as=(0,d.Z)(ss,[["render",xt],["__scopeId","data-v-37b99294"]]);var is=as;const ns={class:"create-edit_form"},os={class:"form_controls"};function rs(e,t,s,i,n,r){const l=(0,o.up)("PostForm"),d=(0,o.up)("a-button");return(0,o.wg)(),(0,o.iD)("form",ns,[(0,o.Wm)(l,{ref:"postFormRef"},null,512),(0,o._)("div",os,[(0,o.Wm)(d,{"html-type":"submit",onClick:(0,a.iM)(e.submit,["prevent"]),disabled:e.isLoading,loading:e.isLoading},{default:(0,o.w5)((()=>[(0,o.Uk)("Submit")])),_:1},8,["onClick","disabled","loading"]),(0,o.Wm)(d,{disabled:e.isLoading,onClick:e.resetForms},{default:(0,o.w5)((()=>[(0,o.Uk)("Reset")])),_:1},8,["disabled","onClick"])])])}const ls=e=>((0,o.dD)("data-v-4b20688d"),e=e(),(0,o.Cn)(),e),ds={class:"create-edit_inputs"},us={class:"form_text"},cs=ls((()=>(0,o._)("br",null,null,-1)));function ps(e,t,s,a,i,n){const r=(0,o.up)("ImageForm"),l=(0,o.up)("a-input"),d=(0,o.up)("a-textarea");return(0,o.wg)(),(0,o.iD)("div",ds,[(0,o.Wm)(r,{ref:"imageFormRef",source:e.post?.previewURL,returnImageFile:e.setPreviewImage},null,8,["source","returnImageFile"]),(0,o._)("div",us,[(0,o.Wm)(l,{value:e.title,"onUpdate:value":t[0]||(t[0]=t=>e.title=t),"show-count":"",maxlength:25,placeholder:"title",disabled:e.isLoading,"allow-clear":""},null,8,["value","disabled"]),cs,(0,o.Wm)(d,{value:e.body,"onUpdate:value":t[1]||(t[1]=t=>e.body=t),"auto-size":{minRows:9,maxRows:9},placeholder:"message",disabled:e.isLoading,"allow-clear":""},null,8,["value","disabled"])])])}const ms=["src"];function hs(e,t,s,i,n,r){const l=(0,o.up)("a-empty"),d=(0,o.up)("a-input"),u=(0,o.up)("CloseCircleFilled");return(0,o.wg)(),(0,o.iD)("div",{class:"form_image",onClick:t[0]||(t[0]=(0,a.iM)(((...t)=>e.openInput&&e.openInput(...t)),["stop"]))},[(0,o.wy)((0,o._)("img",{id:"preview",src:e.src,alt:"preview"},null,8,ms),[[a.F8,e.src]]),e.src?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(l,{key:0,description:null})),(0,o.Wm)(d,{id:"input",hidden:"",onChange:e.changeInput,type:"file",accept:".png, .jpg, .jpeg"},null,8,["onChange"]),e.src?((0,o.wg)(),(0,o.j4)(u,{key:1,onClick:(0,a.iM)(e.reset,["stop"]),class:"form_image-reset"},null,8,["onClick"])):(0,o.kq)("",!0)])}var gs=s(5956),fs=(0,o.aZ)({components:{CloseCircleFilled:gs.Z},props:{source:{type:String},returnImageFile:{type:Function,required:!0}},data(){return{src:this.source||""}},methods:{reset(){this.src="",this.returnImageFile(this.src)},openInput(){const e=document.querySelector("#input");e.click()},changeInput(e){if(!e.target.files.length)return;const t=Array.from(e.target.files)[0];this.returnImageFile(t);const s=new FileReader;s.onload=e=>{this.src=e.target.result},s.readAsDataURL(t)}},watch:{source(){this.src=this.source}}});const vs=(0,d.Z)(fs,[["render",hs],["__scopeId","data-v-7bf6ba61"]]);var ws=vs,ks=(0,o.aZ)({components:{ImageForm:ws},props:{post:{type:Object,default:null}},data(){return{isLoading:!1,preview:null,title:"",body:""}},methods:{setPreviewImage(e){this.preview=e},getFormParams(){const{title:e,body:t,preview:s}=this;return{title:e,body:t,preview:s}},reset(){this.title="",this.body="",this.$refs.imageFormRef.reset(),this.preview=null}},mounted(){this.post&&(this.preview=this.post.previewURL,this.title=this.post.title,this.body=this.post.body)}});const _s=(0,d.Z)(ks,[["render",ps],["__scopeId","data-v-4b20688d"]]);var ys=_s,bs=(0,o.aZ)({components:{PostForm:ys},data(){return{isLoading:!1}},methods:{getFormParams(){return this.$refs.postFormRef.getFormParams()},resetForms(){this.$refs.postFormRef.reset()},submit(){const{title:e,body:t,preview:s}=this.getFormParams();if(!e||!t||!s)return;this.isLoading=!0;const a=this.$store.state.auth.currentUser.uid,i=this.$store.state.auth.currentUser.displayName;ae(a,i,e,t,s).then((()=>{P.ZP.success(`Post "${e}" added`),this.resetForms()})).finally((()=>{this.isLoading=!1}))}}});const Cs=(0,d.Z)(bs,[["render",rs],["__scopeId","data-v-3ef95e30"]]);var Ls=Cs;const Fs={key:0,class:"create-edit_form"},Us={class:"form_controls"};function Ws(e,t,s,i,n,r){const l=(0,o.up)("PostForm"),d=(0,o.up)("a-button"),u=(0,o.up)("a-popconfirm"),c=(0,o.up)("a-spin");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.post?((0,o.wg)(),(0,o.iD)("form",Fs,[(0,o.Wm)(l,{post:e.post,ref:"postFormRef"},null,8,["post"]),(0,o._)("div",Us,[(0,o.Wm)(d,{"html-type":"submit",onClick:(0,a.iM)(e.submit,["prevent"]),disabled:e.isDeleting||e.isLoading,loading:e.isLoading},{default:(0,o.w5)((()=>[(0,o.Uk)("Submit")])),_:1},8,["onClick","disabled","loading"]),e.post?((0,o.wg)(),(0,o.j4)(u,{key:0,title:"Are you sure?","ok-text":"Yes","cancel-text":"No",onConfirm:e.handleDelete},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{loading:e.isDeleting,disabled:e.isDeleting||e.isLoading},{default:(0,o.w5)((()=>[(0,o.Uk)("Delete")])),_:1},8,["loading","disabled"])])),_:1},8,["onConfirm"])):(0,o.kq)("",!0)])])):(0,o.kq)("",!0),e.post?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(c,{key:1,size:"large"}))],64)}var Ds=(0,o.aZ)({components:{PostForm:ys},data(){return{isLoading:!1,isDeleting:!1,post:""}},methods:{getFormParams(){return this.$refs.postFormRef.getFormParams()},submit(){const{title:e,body:t,preview:s}=this.getFormParams();e&&t&&s&&(this.isLoading=!0,se(this.post,e,t,s).then((()=>{P.ZP.success(`Post "${this.post.title}" changed`)})).finally((()=>{this.isLoading=!1;const e=this.post.id;this.$router.push({name:J,params:{id:e}})})))},handleDelete(){this.isDeleting=!0;const e=this.post.id,t=this.post.previewName;fe(e,t).then((()=>{P.ZP.success(`Post "${this.post.title}" deleted`),this.$router.push({name:"main"})})).finally((()=>{this.isDeleting=!1}))}},mounted(){he(this.$route.params.id).then((e=>{this.post=e})).catch((()=>{this.$router.push({name:"error"})}))}});const Ps=(0,d.Z)(Ds,[["render",Ws],["__scopeId","data-v-ed944128"]]);var $s=Ps;const Ss=[{path:"/",name:"main",component:Xe},{path:"/posts/:id",name:"posts",component:is},{path:"/signin",name:"signin",component:wt},{path:"/register",name:"register",component:ut},{path:"/createpost",name:"createpost",component:Ls},{path:"/editpost/:id",name:"editpost",component:$s},{path:"/error",name:"error",component:c},{path:"/:catchAll(.*)",name:"notfound",component:c}],Is=(0,n.p7)({routes:Ss,history:(0,n.r5)()});Is.beforeEach(((e,t,s)=>{A.state.auth.currentUser||("signin"!=e.name&&"register"!=e.name?s({name:"signin"}):s()),A.state.auth.currentUser&&(sessionStorage.page=e.path,"signin"==e.name||"register"==e.name?s({name:"main"}):s())}));var Zs=Is;const xs={key:1,class:"app_container"},Ns={id:"content"};function Os(e,t,s,a,i,n){const r=(0,o.up)("a-spin"),l=(0,o.up)("NavBar"),d=(0,o.up)("router-view");return i.reload?((0,o.wg)(),(0,o.j4)(r,{key:0,class:"reloader",size:"large"})):((0,o.wg)(),(0,o.iD)("div",xs,[((0,o.wg)(),(0,o.j4)(l,{key:i.navbarKey})),(0,o._)("div",Ns,[(0,o.Wm)(d)])]))}const qs=e=>((0,o.dD)("data-v-0d0eda68"),e=e(),(0,o.Cn)(),e),js={class:"navbar navbar_full"},Ms={key:0,class:"navbar__sign"},Ts={key:1,class:"navbar__sign"},zs={class:"navbar-nickname"},Hs={class:"navbar navbar_mob"},Rs=qs((()=>(0,o._)("span",null,"Posts",-1))),As=qs((()=>(0,o._)("span",null,"Theme",-1))),Js=qs((()=>(0,o._)("span",null,"Create post",-1))),Es={key:0,class:"navbar__sign"},Vs=qs((()=>(0,o._)("span",null,"Sign in",-1))),Gs=qs((()=>(0,o._)("span",null,"Register",-1))),Ys={key:1,class:"navbar__sign"},Bs={class:"navbar-nickname"},Ks=qs((()=>(0,o._)("span",null,"Logout",-1)));function Qs(e,t,s,i,n,r){const l=(0,o.up)("a-button"),d=(0,o.up)("HomeFilled"),u=(0,o.up)("a-tooltip"),c=(0,o.up)("BgColorsOutlined"),m=(0,o.up)("FormOutlined"),h=(0,o.up)("LoginOutlined"),g=(0,o.up)("UserAddOutlined"),f=(0,o.up)("UserOutlined"),v=(0,o.up)("LogoutOutlined");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",js,[(0,o._)("div",null,[e.$store.state.auth.currentUser?((0,o.wg)(),(0,o.j4)(l,{key:0,type:"ghost",onClick:t[0]||(t[0]=t=>e.$router.push({name:"main"}))},{default:(0,o.w5)((()=>[(0,o.Uk)("Posts")])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(l,{type:"text",onClick:r.handleChangeTheme},{default:(0,o.w5)((()=>[(0,o.Uk)("Theme")])),_:1},8,["onClick"]),e.$store.state.auth.currentUser?((0,o.wg)(),(0,o.j4)(l,{key:1,type:"text",onClick:t[1]||(t[1]=t=>e.$router.push({name:"createpost"}))},{default:(0,o.w5)((()=>[(0,o.Uk)("Create post")])),_:1})):(0,o.kq)("",!0)]),e.$store.state.auth.currentUser?((0,o.wg)(),(0,o.iD)("div",Ts,[(0,o._)("div",zs,[(0,o._)("strong",null,(0,p.zw)(e.$store.state.auth.currentUser.displayName),1),(0,o.Wm)(l,{type:"text",onClick:r.handleLogout},{default:(0,o.w5)((()=>[(0,o.Uk)("Logout")])),_:1},8,["onClick"])])])):((0,o.wg)(),(0,o.iD)("div",Ms,[(0,o.Wm)(l,{type:"text",onClick:t[2]||(t[2]=t=>e.$router.push({name:"signin"}))},{default:(0,o.w5)((()=>[(0,o.Uk)("Sign in")])),_:1}),(0,o.Wm)(l,{type:"text",onClick:t[3]||(t[3]=t=>e.$router.push({name:"register"}))},{default:(0,o.w5)((()=>[(0,o.Uk)("Register")])),_:1})]))]),(0,o._)("div",Hs,[(0,o._)("div",null,[(0,o.Wm)(u,{placement:"bottom",overlayClassName:r.hiddenClass},{title:(0,o.w5)((()=>[Rs])),default:(0,o.w5)((()=>[e.$store.state.auth.currentUser?((0,o.wg)(),(0,o.j4)(l,{key:0,class:"navbar-icon",type:"text",onClick:t[4]||(t[4]=t=>e.$router.push({name:"main"}))},{icon:(0,o.w5)((()=>[(0,o.Wm)(d)])),_:1})):(0,o.kq)("",!0)])),_:1},8,["overlayClassName"]),(0,o.Wm)(u,{placement:"bottom",overlayClassName:r.hiddenClass},{title:(0,o.w5)((()=>[As])),default:(0,o.w5)((()=>[(0,o.Wm)(l,{class:"navbar-icon",type:"text",onClick:r.handleChangeTheme},{icon:(0,o.w5)((()=>[(0,o.Wm)(c)])),_:1},8,["onClick"])])),_:1},8,["overlayClassName"]),(0,o.Wm)(u,{placement:"bottom",overlayClassName:r.hiddenClass},{title:(0,o.w5)((()=>[Js])),default:(0,o.w5)((()=>[e.$store.state.auth.currentUser?((0,o.wg)(),(0,o.j4)(l,{key:0,class:"navbar-icon",type:"text",onClick:t[5]||(t[5]=t=>e.$router.push({name:"createpost"}))},{icon:(0,o.w5)((()=>[(0,o.Wm)(m)])),_:1})):(0,o.kq)("",!0)])),_:1},8,["overlayClassName"])]),e.$store.state.auth.currentUser?((0,o.wg)(),(0,o.iD)("div",Ys,[(0,o._)("div",Bs,[(0,o._)("strong",null,(0,p.zw)(e.$store.state.auth.currentUser.displayName),1),(0,o.Wm)(u,{placement:"bottomRight"},{title:(0,o.w5)((()=>[(0,o._)("span",null,(0,p.zw)(e.$store.state.auth.currentUser.displayName),1)])),default:(0,o.w5)((()=>[(0,o.Wm)(l,{class:"navbar-icon navbar-user",type:"text",onClick:t[8]||(t[8]=(0,a.iM)((()=>{}),["stop"]))},{icon:(0,o.w5)((()=>[(0,o.Wm)(f)])),_:1})])),_:1})]),(0,o.Wm)(u,{placement:"bottom",overlayClassName:r.hiddenClass},{title:(0,o.w5)((()=>[Ks])),default:(0,o.w5)((()=>[(0,o.Wm)(l,{class:"navbar-icon",type:"text",onClick:r.handleLogout},{icon:(0,o.w5)((()=>[(0,o.Wm)(v)])),_:1},8,["onClick"])])),_:1},8,["overlayClassName"])])):((0,o.wg)(),(0,o.iD)("div",Es,[(0,o.Wm)(u,{placement:"bottom",overlayClassName:r.hiddenClass},{title:(0,o.w5)((()=>[Vs])),default:(0,o.w5)((()=>[(0,o.Wm)(l,{class:"navbar-icon",type:"text",onClick:t[6]||(t[6]=t=>e.$router.push({name:"signin"}))},{icon:(0,o.w5)((()=>[(0,o.Wm)(h)])),_:1})])),_:1},8,["overlayClassName"]),(0,o.Wm)(u,{placement:"bottom",overlayClassName:r.hiddenClass},{title:(0,o.w5)((()=>[Gs])),default:(0,o.w5)((()=>[(0,o.Wm)(l,{class:"navbar-icon",type:"text",onClick:t[7]||(t[7]=t=>e.$router.push({name:"register"}))},{icon:(0,o.w5)((()=>[(0,o.Wm)(g)])),_:1})])),_:1},8,["overlayClassName"])]))])],64)}var Xs=s(9965),ea=s(9427),ta=s(851),sa=s(5101),aa=s(6110),ia=s(7935),na={components:{HomeFilled:Xs.Z,FormOutlined:ea.Z,LoginOutlined:ta.Z,LogoutOutlined:sa.Z,UserOutlined:at.Z,UserAddOutlined:aa.Z,BgColorsOutlined:ia.Z},computed:{isMobile(){return ke()},hiddenClass(){return this.isMobile?"tooltip_hidden":""}},methods:{handleLogout(){Q().then((()=>{delete sessionStorage.user,this.$router.push({name:"signin"})}))},handleChangeTheme(){document.querySelector("body").classList.toggle("dark"),localStorage.theme?delete localStorage.theme:localStorage.theme="dark"}}};const oa=(0,d.Z)(na,[["render",Qs],["__scopeId","data-v-0d0eda68"]]);var ra=oa,la={components:{NavBar:ra},data(){return{reload:!1,navbarKey:0}},methods:{},created(){if(sessionStorage.user){this.reload=!0;const e=125,t=setInterval((()=>{this.$store.state.auth.currentUser&&(this.navbarKey++,this.$router.push(sessionStorage.page),this.reload=!1,clearInterval(t))}),e)}localStorage.theme&&document.querySelector("body").classList.add("dark")}};const da=(0,d.Z)(la,[["render",Os]]);var ua=da;(0,a.ri)(ua).use(A).use(Zs).use(i.ZP).mount("#app")}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,n){if(!a){var o=1/0;for(u=0;u<e.length;u++){a=e[u][0],i=e[u][1],n=e[u][2];for(var r=!0,l=0;l<a.length;l++)(!1&n||o>=n)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(r=!1,n<o&&(o=n));if(r){e.splice(u--,1);var d=i();void 0!==d&&(t=d)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[a,i,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,n,o=a[0],r=a[1],l=a[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(l)var u=l(s)}for(t&&t(a);d<o.length;d++)n=o[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(u)},a=self["webpackChunkblog"]=self["webpackChunkblog"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(4970)}));a=s.O(a)})();
//# sourceMappingURL=app.13a9ed07.js.map